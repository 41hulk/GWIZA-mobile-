{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.getInfoAsync=getInfoAsync;exports.readAsStringAsync=readAsStringAsync;exports.writeAsStringAsync=writeAsStringAsync;exports.deleteAsync=deleteAsync;exports.moveAsync=moveAsync;exports.copyAsync=copyAsync;exports.makeDirectoryAsync=makeDirectoryAsync;exports.readDirectoryAsync=readDirectoryAsync;exports.downloadAsync=downloadAsync;exports.createDownloadResumable=createDownloadResumable;exports.DownloadResumable=exports.EncodingTypes=exports.bundleDirectory=exports.bundledAssets=exports.cacheDirectory=exports.documentDirectory=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _expoCore=require(\"expo-core\");var _uuidJs=_interopRequireDefault(require(\"uuid-js\"));var FS=_expoCore.NativeModulesProxy.ExponentFileSystem;var normalizeEndingSlash=function normalizeEndingSlash(p){return p.replace(/\\/*$/,'')+'/';};FS.documentDirectory=normalizeEndingSlash(FS.documentDirectory);FS.cacheDirectory=normalizeEndingSlash(FS.cacheDirectory);var documentDirectory=FS.documentDirectory;exports.documentDirectory=documentDirectory;var cacheDirectory=FS.cacheDirectory;exports.cacheDirectory=cacheDirectory;var bundledAssets=FS.bundledAssets;exports.bundledAssets=bundledAssets;var bundleDirectory=FS.bundleDirectory;exports.bundleDirectory=bundleDirectory;var EncodingTypes={UTF8:\"utf8\",Base64:\"base64\"};exports.EncodingTypes=EncodingTypes;function getInfoAsync(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return FS.getInfoAsync(fileUri,options);}function readAsStringAsync(fileUri,options){return FS.readAsStringAsync(fileUri,options||{});}function writeAsStringAsync(fileUri,contents,options){return FS.writeAsStringAsync(fileUri,contents,options||{});}function deleteAsync(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return FS.deleteAsync(fileUri,options);}function moveAsync(options){return FS.moveAsync(options);}function copyAsync(options){return FS.copyAsync(options);}function makeDirectoryAsync(fileUri){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return FS.makeDirectoryAsync(fileUri,options);}function readDirectoryAsync(fileUri){return FS.readDirectoryAsync(fileUri,{});}function downloadAsync(uri,fileUri){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};return FS.downloadAsync(uri,fileUri,options);}function createDownloadResumable(uri,fileUri,options,callback,resumeData){return new DownloadResumable(uri,fileUri,options,callback,resumeData);}var DownloadResumable=function(){function DownloadResumable(url,fileUri){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};var callback=arguments.length>3?arguments[3]:undefined;var resumeData=arguments.length>4?arguments[4]:undefined;(0,_classCallCheck2.default)(this,DownloadResumable);this._uuid=_uuidJs.default.create(4).toString();this._url=url;this._fileUri=fileUri;this._options=options;this._resumeData=resumeData;this._callback=callback;this._subscription=null;this._emitter=new _expoCore.EventEmitter(FS);}(0,_createClass2.default)(DownloadResumable,[{key:\"downloadAsync\",value:function downloadAsync(){return _regenerator.default.async(function downloadAsync$(_context){while(1){switch(_context.prev=_context.next){case 0:this._addSubscription();_context.next=3;return _regenerator.default.awrap(FS.downloadResumableStartAsync(this._url,this._fileUri,this._uuid,this._options,this._resumeData));case 3:return _context.abrupt(\"return\",_context.sent);case 4:case\"end\":return _context.stop();}}},null,this);}},{key:\"pauseAsync\",value:function pauseAsync(){var pauseResult;return _regenerator.default.async(function pauseAsync$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return _regenerator.default.awrap(FS.downloadResumablePauseAsync(this._uuid));case 2:pauseResult=_context2.sent;this._removeSubscription();if(!pauseResult){_context2.next=9;break;}this._resumeData=pauseResult.resumeData;return _context2.abrupt(\"return\",this.savable());case 9:throw new Error('Unable to generate a savable pause state');case 10:case\"end\":return _context2.stop();}}},null,this);}},{key:\"resumeAsync\",value:function resumeAsync(){return _regenerator.default.async(function resumeAsync$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this._addSubscription();_context3.next=3;return _regenerator.default.awrap(FS.downloadResumableStartAsync(this._url,this._fileUri,this._uuid,this._options,this._resumeData));case 3:return _context3.abrupt(\"return\",_context3.sent);case 4:case\"end\":return _context3.stop();}}},null,this);}},{key:\"savable\",value:function savable(){return{url:this._url,fileUri:this._fileUri,options:this._options,resumeData:this._resumeData};}},{key:\"_addSubscription\",value:function _addSubscription(){var _this=this;if(this._subscription){return;}this._subscription=this._emitter.addListener('Exponent.downloadProgress',function(_ref){var uuid=_ref.uuid,data=_ref.data;if(uuid===_this._uuid){var callback=_this._callback;if(callback){callback(data);}}});}},{key:\"_removeSubscription\",value:function _removeSubscription(){if(!this._subscription){return;}this._emitter.removeSubscription(this._subscription);this._subscription=null;}}]);return DownloadResumable;}();exports.DownloadResumable=DownloadResumable;","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/node_modules/expo-file-system/FileSystem.js"],"names":["FS","NativeModulesProxy","ExponentFileSystem","normalizeEndingSlash","p","replace","documentDirectory","cacheDirectory","bundledAssets","bundleDirectory","EncodingTypes","UTF8","Base64","getInfoAsync","fileUri","options","readAsStringAsync","writeAsStringAsync","contents","deleteAsync","moveAsync","copyAsync","makeDirectoryAsync","readDirectoryAsync","downloadAsync","uri","createDownloadResumable","callback","resumeData","DownloadResumable","url","_uuid","UUID","create","toString","_url","_fileUri","_options","_resumeData","_callback","_subscription","_emitter","EventEmitter","_addSubscription","downloadResumableStartAsync","downloadResumablePauseAsync","pauseResult","_removeSubscription","savable","Error","addListener","uuid","data","removeSubscription"],"mappings":"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","sourcesContent":["// @flow\n\nimport { NativeModulesProxy, EventEmitter } from 'expo-core';\nimport UUID from 'uuid-js';\n\nconst FS = NativeModulesProxy.ExponentFileSystem;\n\nconst normalizeEndingSlash = p => p.replace(/\\/*$/, '') + '/';\n\nFS.documentDirectory = normalizeEndingSlash(FS.documentDirectory);\nFS.cacheDirectory = normalizeEndingSlash(FS.cacheDirectory);\n\nexport const documentDirectory = FS.documentDirectory;\nexport const cacheDirectory = FS.cacheDirectory;\nexport const bundledAssets = FS.bundledAssets;\nexport const bundleDirectory = FS.bundleDirectory;\nexport const EncodingTypes = {\n  UTF8: \"utf8\",\n  Base64: \"base64\",\n}\n\ntype FileInfo =\n  | {\n      exists: true,\n      uri: string,\n      size: number,\n      modificationTime: number,\n      md5?: string,\n    }\n  | {\n      exists: false,\n      isDirectory: false,\n    };\n\nexport type EncodingType =\n  | typeof EncodingTypes.UTF8\n  | typeof EncodingTypes.Base64\n\nexport type ReadingOptions = {\n  encoding?: EncodingType,\n  position?: number,\n  length?: number\n}\nexport type WritingOptions = {\n  encoding?: EncodingType,\n}\n\nexport function getInfoAsync(fileUri: string, options: { md5?: boolean } = {}): Promise<FileInfo> {\n  return FS.getInfoAsync(fileUri, options);\n}\n\nexport function readAsStringAsync(fileUri: string, options?: ReadingOptions): Promise<string> {\n  return FS.readAsStringAsync(fileUri, options || {});\n}\n\nexport function writeAsStringAsync(fileUri: string, contents: string, options?: WritingOptions): Promise<void> {\n  return FS.writeAsStringAsync(fileUri, contents, options || {});\n}\n\nexport function deleteAsync(\n  fileUri: string,\n  options: { idempotent?: boolean } = {}\n): Promise<void> {\n  return FS.deleteAsync(fileUri, options);\n}\n\nexport function moveAsync(options: { from: string, to: string }): Promise<void> {\n  return FS.moveAsync(options);\n}\n\nexport function copyAsync(options: { from: string, to: string }): Promise<void> {\n  return FS.copyAsync(options);\n}\n\nexport function makeDirectoryAsync(\n  fileUri: string,\n  options: { intermediates?: boolean } = {}\n): Promise<void> {\n  return FS.makeDirectoryAsync(fileUri, options);\n}\n\nexport function readDirectoryAsync(fileUri: string): Array<string> {\n  return FS.readDirectoryAsync(fileUri, {});\n}\n\ntype DownloadOptions = {\n  md5?: boolean,\n  headers?: { [string]: string },\n};\ntype DownloadResult = {\n  uri: string,\n  status: number,\n  headers: { [string]: string },\n  md5?: string,\n};\n\nexport function downloadAsync(\n  uri: string,\n  fileUri: string,\n  options: DownloadOptions = {}\n): Promise<DownloadResult> {\n  return FS.downloadAsync(uri, fileUri, options);\n}\n\nexport function createDownloadResumable(\n  uri: string,\n  fileUri: string,\n  options?: DownloadOptions,\n  callback?: DownloadProgressCallback,\n  resumeData?: string\n) {\n  return new DownloadResumable(uri, fileUri, options, callback, resumeData);\n}\n\ntype DownloadProgressCallback = (data: DownloadProgressData) => void;\ntype DownloadProgressData = {\n  totalBytesWritten: number,\n  totalBytesExpectedToWrite: number,\n};\ntype DownloadPauseState = {\n  url: string,\n  fileUri: string,\n  options: DownloadOptions,\n  resumeData: ?string,\n};\n\nexport class DownloadResumable {\n  _uuid: string;\n  _url: string;\n  _fileUri: string;\n  _options: DownloadOptions;\n  _resumeData: ?string;\n  _callback: ?DownloadProgressCallback;\n  _subscription: ?Function;\n  _emitter: EventEmitter;\n\n  constructor(\n    url: string,\n    fileUri: string,\n    options: DownloadOptions = {},\n    callback: ?DownloadProgressCallback,\n    resumeData: ?string\n  ) {\n    this._uuid = UUID.create(4).toString();\n    this._url = url;\n    this._fileUri = fileUri;\n    this._options = options;\n    this._resumeData = resumeData;\n    this._callback = callback;\n    this._subscription = null;\n    this._emitter = new EventEmitter(FS);\n  }\n\n  async downloadAsync(): Promise<?DownloadResult> {\n    this._addSubscription();\n    return await FS.downloadResumableStartAsync(\n      this._url,\n      this._fileUri,\n      this._uuid,\n      this._options,\n      this._resumeData\n    );\n  }\n\n  async pauseAsync(): Promise<DownloadPauseState> {\n    const pauseResult = await FS.downloadResumablePauseAsync(this._uuid);\n    this._removeSubscription();\n    if (pauseResult) {\n      this._resumeData = pauseResult.resumeData;\n      return this.savable();\n    } else {\n      throw new Error('Unable to generate a savable pause state');\n    }\n  }\n\n  async resumeAsync(): Promise<?DownloadResult> {\n    this._addSubscription();\n    return await FS.downloadResumableStartAsync(\n      this._url,\n      this._fileUri,\n      this._uuid,\n      this._options,\n      this._resumeData\n    );\n  }\n\n  savable(): DownloadPauseState {\n    return {\n      url: this._url,\n      fileUri: this._fileUri,\n      options: this._options,\n      resumeData: this._resumeData,\n    };\n  }\n\n  _addSubscription(): void {\n    if (this._subscription) {\n      return;\n    }\n    this._subscription = this._emitter.addListener(\n      'Exponent.downloadProgress',\n      ({ uuid, data }) => {\n        if (uuid === this._uuid) {\n          const callback = this._callback;\n          if (callback) {\n            callback(data);\n          }\n        }\n      }\n    );\n  }\n\n  _removeSubscription(): void {\n    if (!this._subscription) {\n      return;\n    }\n    this._emitter.removeSubscription(this._subscription);\n    this._subscription = null;\n  }\n}\n"]},"metadata":{},"sourceType":"script"}