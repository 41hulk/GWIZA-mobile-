{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _regenerator=_interopRequireDefault(require(\"@babel/runtime/regenerator\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf3=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var _nativeBase=require(\"native-base\");var _reactNativeUserAvatar=_interopRequireDefault(require(\"react-native-user-avatar\"));var _NavBottom=_interopRequireDefault(require(\"../NavBottom\"));var CONTACT_PAGE_SIZE=5000;var FriendScreen=function(_Component){(0,_inherits2.default)(FriendScreen,_Component);function FriendScreen(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,FriendScreen);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(FriendScreen)).call.apply(_getPrototypeOf2,[this].concat(args)));_this._rawContacts={};_this.state={contacts:[],hasPreviousPage:false,hasNextPage:false,permission:null,refreshing:false};_this.checkPermissionAsync=function _callee(){var _ref,status;return _regenerator.default.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return _regenerator.default.awrap(Expo.Permissions.askAsync(Expo.Permissions.CONTACTS));case 2:_ref=_context.sent;status=_ref.status;_this.setState({permission:status==='granted'});case 5:case\"end\":return _context.stop();}}},null,this);};_this.loadAsync=function _callee2(){var restart,pageOffset,pageSize,payload,contacts,hasPreviousPage,hasNextPage,_iterator,_isArray,_i,_ref2,_contact,_args2=arguments;return _regenerator.default.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:restart=_args2.length>0&&_args2[0]!==undefined?_args2[0]:false;console.log('--------------------------------------------');if(!(!_this.state.permission||_this.state.refreshing)){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:_this.setState({refreshing:true});pageOffset=restart?0:_this.state.contacts.length||0;pageSize=restart?Math.max(pageOffset,CONTACT_PAGE_SIZE):CONTACT_PAGE_SIZE;_context2.next=9;return _regenerator.default.awrap(Expo.Contacts.getContactsAsync({fields:[Expo.Contacts.PHONE_NUMBERS],pageSize:pageSize,pageOffset:pageOffset}));case 9:payload=_context2.sent;contacts=payload.data,hasPreviousPage=payload.hasPreviousPage,hasNextPage=payload.hasNextPage;_iterator=contacts,_isArray=Array.isArray(_iterator),_i=0,_iterator=_isArray?_iterator:_iterator[typeof Symbol===\"function\"?typeof Symbol===\"function\"?typeof Symbol===\"function\"?typeof Symbol===\"function\"?Symbol.iterator:\"@@iterator\":\"@@iterator\":\"@@iterator\":\"@@iterator\"]();case 12:if(!_isArray){_context2.next=18;break;}if(!(_i>=_iterator.length)){_context2.next=15;break;}return _context2.abrupt(\"break\",26);case 15:_ref2=_iterator[_i++];_context2.next=22;break;case 18:_i=_iterator.next();if(!_i.done){_context2.next=21;break;}return _context2.abrupt(\"break\",26);case 21:_ref2=_i.value;case 22:_contact=_ref2;_this._rawContacts[_contact.id]=_contact;case 24:_context2.next=12;break;case 26:_this.setState({contacts:Object.values(_this._rawContacts),hasPreviousPage:hasPreviousPage,hasNextPage:hasNextPage,refreshing:false});case 27:case\"end\":return _context2.stop();}}},null,this);};_this._showAlert=function(){alert('Alert Title');};_this._keyExtractor=function(item,index){return item.id;};return _this;}(0,_createClass2.default)(FriendScreen,[{key:\"componentDidMount\",value:function componentDidMount(){return _regenerator.default.async(function componentDidMount$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _regenerator.default.awrap(this.checkPermissionAsync());case 2:_context3.next=4;return _regenerator.default.awrap(this.loadAsync());case 4:case\"end\":return _context3.stop();}}},null,this);}},{key:\"hasSeparator\",value:function hasSeparator(item){var firstLetter=item.firstName.substring(0,1);if(firstLetter!=this.firstLetter){this.firstLetter=firstLetter;return _react.default.createElement(_reactNative.View,null,_react.default.createElement(_nativeBase.Separator,{bordered:true},_react.default.createElement(_reactNative.Text,{style:{fontSize:20,marginLeft:10}},firstLetter)),_react.default.createElement(_nativeBase.ListItem,null,_react.default.createElement(_nativeBase.Left,null,_react.default.createElement(_reactNativeUserAvatar.default,{size:\"32\",name:item.firstName})),_react.default.createElement(_nativeBase.Body,null,_react.default.createElement(_reactNative.Text,null,item.firstName,\" \",item.lastName),_react.default.createElement(_reactNative.Text,{note:true}))));}return _react.default.createElement(_nativeBase.ListItem,null,_react.default.createElement(_nativeBase.Left,null,_react.default.createElement(_reactNativeUserAvatar.default,{size:\"32\",name:item.firstName})),_react.default.createElement(_nativeBase.Body,null,_react.default.createElement(_reactNative.Text,null,item.firstName,\" \",item.lastName),_react.default.createElement(_reactNative.Text,{note:true})));}},{key:\"render\",value:function render(){var _this$state=this.state,contacts=_this$state.contacts,permission=_this$state.permission;if(this.state.loading){return _react.default.createElement(Expo.AppLoading,null);}return _react.default.createElement(_nativeBase.Container,null,_react.default.createElement(_nativeBase.Content,null,_react.default.createElement(_reactNative.FlatList,{keyExtractor:this._keyExtractor,renderItem:function renderItem(_ref3){var item=_ref3.item;return _react.default.createElement(_nativeBase.ListItem,null,_react.default.createElement(_nativeBase.Left,null,_react.default.createElement(_reactNativeUserAvatar.default,{size:\"32\",name:item.firstName}),_react.default.createElement(_nativeBase.Body,null,_react.default.createElement(_reactNative.Text,null,item.firstName,\" \",item.lastName),_react.default.createElement(_reactNative.Text,{note:true}))));},onEndReachedThreshold:-1.5,data:contacts.filter(function(x){return x.firstName!=null;}).sort(function(a,b){return a.firstName.localeCompare(b.firstName);}),onPressItem:this.onPressItem,onEndReached:this.loadAsync})),_react.default.createElement(_NavBottom.default,null));}}]);return FriendScreen;}(_react.Component);exports.default=FriendScreen;var styles=_reactNative.StyleSheet.create({container:{flex:1,paddingTop:22},item:{padding:10,fontSize:18,height:44}});","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/screens/Savings/newMember.js"],"names":["CONTACT_PAGE_SIZE","FriendScreen","_rawContacts","state","contacts","hasPreviousPage","hasNextPage","permission","refreshing","checkPermissionAsync","Expo","Permissions","askAsync","CONTACTS","status","setState","loadAsync","restart","console","log","pageOffset","length","pageSize","Math","max","Contacts","getContactsAsync","fields","PHONE_NUMBERS","payload","data","contact","id","Object","values","_showAlert","alert","_keyExtractor","item","index","firstLetter","firstName","substring","fontSize","marginLeft","lastName","loading","filter","x","sort","a","b","localeCompare","onPressItem","Component","styles","StyleSheet","create","container","flex","paddingTop","padding","height"],"mappings":"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","sourcesContent":["// React and external dependencies\nimport React, { Component } from \"react\";\nimport { AppRegistry, FlatList, StyleSheet, Text, View, ActivityIndicator } from 'react-native';\nimport { Container, Header, Content, List,Item,Icon,Input, ListItem, Separator,Left,Body,Right } from \"native-base\";\nimport UserAvatar from 'react-native-user-avatar';\nimport NavBottom from '../NavBottom';\n/****************************************************************************\n* Friend screen component\n ***************************************************************************/\nconst CONTACT_PAGE_SIZE = 5000;\n\n/**\n * Lists phone contacts\n */\nexport default class FriendScreen extends Component {\n    _rawContacts = {};\n    state = {\n      contacts: [],\n      hasPreviousPage: false,\n      hasNextPage: false,\n      permission: null,\n      refreshing: false,\n    };\n\n  async componentDidMount() {\n    await this.checkPermissionAsync();\n    await this.loadAsync();\n  }\n\n  checkPermissionAsync = async () => {\n    const { status } = await Expo.Permissions.askAsync(Expo.Permissions.CONTACTS);\n    this.setState({ permission: status === 'granted' });\n  };\n\n  loadAsync = async (restart = false) => {\n    console.log('--------------------------------------------');\n    if (!this.state.permission || this.state.refreshing) {\n      return;\n    }\n    this.setState({ refreshing: true });\n\n    const pageOffset = restart ? 0 : this.state.contacts.length || 0;\n\n    const pageSize = restart ? Math.max(pageOffset, CONTACT_PAGE_SIZE) : CONTACT_PAGE_SIZE;\n\n    const payload = await Expo.Contacts.getContactsAsync({\n      fields: [\n        Expo.Contacts.PHONE_NUMBERS\n      ],\n      pageSize,\n      pageOffset,\n    });\n\n    const { data: contacts, hasPreviousPage, hasNextPage } = payload;\n\n    for (const contact of contacts) {\n      this._rawContacts[contact.id] = contact;\n    }\n\n    this.setState({\n      contacts: Object.values(this._rawContacts),\n      hasPreviousPage,\n      hasNextPage,\n      refreshing: false,\n    });\n  };\n\n  _showAlert = () => {\n    alert('Alert Title')\n  }\n\n  hasSeparator(item){\n\n    let firstLetter = item.firstName.substring(0,1);\n\n    if (firstLetter != this.firstLetter) {\n      this.firstLetter = firstLetter;\n\n      return (\n        <View>\n          <Separator bordered>\n            <Text style= {{ fontSize: 20, marginLeft: 10 }}>{firstLetter}</Text>\n          </Separator>\n          <ListItem>\n            <Left>\n              <UserAvatar size=\"32\" name={item.firstName} />\n            </Left>\n            <Body> \n              <Text>{item.firstName} {item.lastName}</Text>\n              <Text note></Text>\n            </Body>\n          </ListItem>\n        </View>\n      )\n    }\n\n    return (\n      <ListItem>\n        <Left>\n          <UserAvatar size=\"32\" name={item.firstName} />\n        </Left>\n        <Body> \n          <Text>{item.firstName} {item.lastName}</Text>\n          <Text note></Text>\n        </Body>\n      </ListItem>\n    )\n  }\n\n  _keyExtractor = (item, index) => item.id;\n\n\n  render() {\n\n    const { contacts, permission } = this.state;\n\n    if (this.state.loading) {\n        return (\n          <Expo.AppLoading />\n        );\n    }\n\n    return (\n      <Container>\n        <Content>\n        <FlatList\n           keyExtractor={this._keyExtractor}\n           renderItem={({ item }) =>\n            <ListItem>\n                <Left>\n                  <UserAvatar size=\"32\" name={item.firstName} />\n                  <Body> \n                    <Text>{item.firstName} {item.lastName}</Text>\n                    <Text note></Text>\n                  </Body>\n                </Left>\n              </ListItem>\n           }\n           onEndReachedThreshold={-1.5}\n           data={contacts.filter(x => x.firstName != null).sort((a,b) => {return a.firstName.localeCompare(b.firstName) })}\n           onPressItem={this.onPressItem}\n           onEndReached={this.loadAsync}\n        />\n        </Content>\n        <NavBottom/>\n      </Container>\n    )\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n   flex: 1,\n   paddingTop: 22\n  },\n  item: {\n    padding: 10,\n    fontSize: 18,\n    height: 44,\n  },\n})\n"]},"metadata":{},"sourceType":"script"}