{"ast":null,"code":"'use strict';var _toConsumableArray=require(\"@babel/runtime/helpers/toConsumableArray\");Object.defineProperty(exports,\"__esModule\",{value:true});var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _invariant=require(\"../utils/invariant\");var _invariant2=_interopRequireDefault(_invariant);var _getScreenForRouteName=require(\"./getScreenForRouteName\");var _getScreenForRouteName2=_interopRequireDefault(_getScreenForRouteName);var _createConfigGetter=require(\"./createConfigGetter\");var _createConfigGetter2=_interopRequireDefault(_createConfigGetter);var _NavigationActions=require(\"../NavigationActions\");var _NavigationActions2=_interopRequireDefault(_NavigationActions);var _StackActions=require(\"./StackActions\");var _StackActions2=_interopRequireDefault(_StackActions);var _validateRouteConfigMap=require(\"./validateRouteConfigMap\");var _validateRouteConfigMap2=_interopRequireDefault(_validateRouteConfigMap);var _pathUtils=require(\"./pathUtils\");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}var defaultActionCreators=function defaultActionCreators(){return{};};function childrenUpdateWithoutSwitchingIndex(actionType){return[_NavigationActions2.default.SET_PARAMS,_StackActions2.default.COMPLETE_TRANSITION].includes(actionType);}exports.default=function(routeConfigs){var config=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};(0,_validateRouteConfigMap2.default)(routeConfigs);var order=config.order||Object.keys(routeConfigs);var getCustomActionCreators=config.getCustomActionCreators||defaultActionCreators;var initialRouteParams=config.initialRouteParams;var initialRouteName=config.initialRouteName||order[0];var backBehavior=config.backBehavior||'none';var shouldBackNavigateToInitialRoute=backBehavior==='initialRoute';var resetOnBlur=config.hasOwnProperty('resetOnBlur')?config.resetOnBlur:true;var initialRouteIndex=order.indexOf(initialRouteName);var childRouters={};order.forEach(function(routeName){childRouters[routeName]=null;var screen=(0,_getScreenForRouteName2.default)(routeConfigs,routeName);if(screen.router){childRouters[routeName]=screen.router;}});function getParamsForRoute(routeName,params){var routeConfig=routeConfigs[routeName];if(routeConfig&&routeConfig.params){return _extends({},routeConfig.params,params);}else{return params;}}var _ref=(0,_pathUtils.createPathParser)(childRouters,routeConfigs,config),getPathAndParamsForRoute=_ref.getPathAndParamsForRoute,_getActionForPathAndParams=_ref.getActionForPathAndParams;if(initialRouteIndex===-1){throw new Error(\"Invalid initialRouteName '\"+initialRouteName+\"'.\"+(\"Should be one of \"+order.map(function(n){return\"\\\"\"+n+\"\\\"\";}).join(', ')));}function resetChildRoute(routeName){var initialParams=routeName===initialRouteName?initialRouteParams:undefined;var params=getParamsForRoute(routeName,initialParams);var childRouter=childRouters[routeName];if(childRouter){var childAction=_NavigationActions2.default.init();return _extends({},childRouter.getStateForAction(childAction),{key:routeName,routeName:routeName,params:params});}return{key:routeName,routeName:routeName,params:params};}function getNextState(prevState,possibleNextState){if(!prevState){return possibleNextState;}var nextState=void 0;if(prevState.index!==possibleNextState.index&&resetOnBlur){var prevRouteName=prevState.routes[prevState.index].routeName;var nextRoutes=_toConsumableArray(possibleNextState.routes);nextRoutes[prevState.index]=resetChildRoute(prevRouteName);return _extends({},possibleNextState,{routes:nextRoutes});}else{nextState=possibleNextState;}return nextState;}function getInitialState(){var routes=order.map(resetChildRoute);return{routes:routes,index:initialRouteIndex,isTransitioning:false};}return{childRouters:childRouters,getActionCreators:function getActionCreators(route,stateKey){return getCustomActionCreators(route,stateKey);},getStateForAction:function getStateForAction(action,inputState){var prevState=inputState?_extends({},inputState):inputState;var state=inputState||getInitialState();var activeChildIndex=state.index;if(action.type===_NavigationActions2.default.INIT){var params=action.params;if(params){state.routes=state.routes.map(function(route){return _extends({},route,{params:_extends({},route.params,params,route.routeName===initialRouteName?initialRouteParams:null)});});}}var activeChildLastState=state.routes[state.index];var activeChildRouter=childRouters[order[state.index]];if(activeChildRouter){var activeChildState=activeChildRouter.getStateForAction(action,activeChildLastState);if(!activeChildState&&inputState){return null;}if(activeChildState&&activeChildState!==activeChildLastState){var _routes=_toConsumableArray(state.routes);_routes[state.index]=activeChildState;return getNextState(prevState,_extends({},state,{routes:_routes}));}}var isBackEligible=action.key==null||action.key===activeChildLastState.key;if(action.type===_NavigationActions2.default.BACK){if(isBackEligible&&shouldBackNavigateToInitialRoute){activeChildIndex=initialRouteIndex;}else{return state;}}var didNavigate=false;if(action.type===_NavigationActions2.default.NAVIGATE){didNavigate=!!order.find(function(childId,i){if(childId===action.routeName){activeChildIndex=i;return true;}return false;});if(didNavigate){var childState=state.routes[activeChildIndex];var childRouter=childRouters[action.routeName];var newChildState=childState;if(action.action&&childRouter){var childStateUpdate=childRouter.getStateForAction(action.action,childState);if(childStateUpdate){newChildState=childStateUpdate;}}if(action.params){newChildState=_extends({},newChildState,{params:_extends({},newChildState.params||{},action.params)});}if(newChildState!==childState){var _routes2=_toConsumableArray(state.routes);_routes2[activeChildIndex]=newChildState;var nextState=_extends({},state,{routes:_routes2,index:activeChildIndex});return getNextState(prevState,nextState);}else if(newChildState===childState&&state.index===activeChildIndex&&prevState){return null;}}}if(action.type===_NavigationActions2.default.SET_PARAMS){var key=action.key;var lastRoute=state.routes.find(function(route){return route.key===key;});if(lastRoute){var _params=_extends({},lastRoute.params,action.params);var _routes3=_toConsumableArray(state.routes);_routes3[state.routes.indexOf(lastRoute)]=_extends({},lastRoute,{params:_params});return getNextState(prevState,_extends({},state,{routes:_routes3}));}}if(activeChildIndex!==state.index){return getNextState(prevState,_extends({},state,{index:activeChildIndex}));}else if(didNavigate&&!inputState){return state;}else if(didNavigate){return _extends({},state);}var index=state.index;var routes=state.routes;order.find(function(childId,i){var childRouter=childRouters[childId];if(i===index){return false;}var childState=routes[i];if(childRouter){childState=childRouter.getStateForAction(action,childState);}if(!childState){index=i;return true;}if(childState!==routes[i]){routes=_toConsumableArray(routes);routes[i]=childState;index=i;return true;}return false;});if(childrenUpdateWithoutSwitchingIndex(action.type)){index=state.index;}if(index!==state.index||routes!==state.routes){return getNextState(prevState,_extends({},state,{index:index,routes:routes}));}return state;},getComponentForState:function getComponentForState(state){var routeName=state.routes[state.index].routeName;(0,_invariant2.default)(routeName,\"There is no route defined for index \"+state.index+\". Check that\\n        that you passed in a navigation state with a valid tab/screen index.\");var childRouter=childRouters[routeName];if(childRouter){return childRouter.getComponentForState(state.routes[state.index]);}return(0,_getScreenForRouteName2.default)(routeConfigs,routeName);},getComponentForRouteName:function getComponentForRouteName(routeName){return(0,_getScreenForRouteName2.default)(routeConfigs,routeName);},getPathAndParamsForState:function getPathAndParamsForState(state){var route=state.routes[state.index];return getPathAndParamsForRoute(route);},getActionForPathAndParams:function getActionForPathAndParams(path,params){return _getActionForPathAndParams(path,params);},getScreenOptions:(0,_createConfigGetter2.default)(routeConfigs,config.defaultNavigationOptions)};};","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/node_modules/@react-navigation/core/dist/routers/SwitchRouter.js"],"names":["Object","defineProperty","exports","value","_extends","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","_invariant","require","_invariant2","_interopRequireDefault","_getScreenForRouteName","_getScreenForRouteName2","_createConfigGetter","_createConfigGetter2","_NavigationActions","_NavigationActions2","_StackActions","_StackActions2","_validateRouteConfigMap","_validateRouteConfigMap2","_pathUtils","obj","__esModule","default","defaultActionCreators","childrenUpdateWithoutSwitchingIndex","actionType","SET_PARAMS","COMPLETE_TRANSITION","includes","routeConfigs","config","order","keys","getCustomActionCreators","initialRouteParams","initialRouteName","backBehavior","shouldBackNavigateToInitialRoute","resetOnBlur","initialRouteIndex","indexOf","childRouters","forEach","routeName","screen","router","getParamsForRoute","params","routeConfig","createPathParser","getPathAndParamsForRoute","getActionForPathAndParams","Error","map","n","join","resetChildRoute","initialParams","undefined","childRouter","childAction","init","getStateForAction","getNextState","prevState","possibleNextState","nextState","index","prevRouteName","routes","nextRoutes","getInitialState","isTransitioning","getActionCreators","route","stateKey","action","inputState","state","activeChildIndex","type","INIT","activeChildLastState","activeChildRouter","activeChildState","_routes","isBackEligible","BACK","didNavigate","NAVIGATE","find","childId","childState","newChildState","childStateUpdate","_routes2","lastRoute","_params","_routes3","getComponentForState","getComponentForRouteName","getPathAndParamsForState","path","getScreenOptions","defaultNavigationOptions"],"mappings":"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","sourcesContent":["'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _invariant = require('../utils/invariant');\n\nvar _invariant2 = _interopRequireDefault(_invariant);\n\nvar _getScreenForRouteName = require('./getScreenForRouteName');\n\nvar _getScreenForRouteName2 = _interopRequireDefault(_getScreenForRouteName);\n\nvar _createConfigGetter = require('./createConfigGetter');\n\nvar _createConfigGetter2 = _interopRequireDefault(_createConfigGetter);\n\nvar _NavigationActions = require('../NavigationActions');\n\nvar _NavigationActions2 = _interopRequireDefault(_NavigationActions);\n\nvar _StackActions = require('./StackActions');\n\nvar _StackActions2 = _interopRequireDefault(_StackActions);\n\nvar _validateRouteConfigMap = require('./validateRouteConfigMap');\n\nvar _validateRouteConfigMap2 = _interopRequireDefault(_validateRouteConfigMap);\n\nvar _pathUtils = require('./pathUtils');\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar defaultActionCreators = () => ({});\n\nfunction childrenUpdateWithoutSwitchingIndex(actionType) {\n  return [_NavigationActions2.default.SET_PARAMS,\n  // Todo: make SwitchRouter not depend on StackActions..\n  _StackActions2.default.COMPLETE_TRANSITION].includes(actionType);\n}\n\nexports.default = (routeConfigs, config = {}) => {\n  // Fail fast on invalid route definitions\n  (0, _validateRouteConfigMap2.default)(routeConfigs);\n\n  var order = config.order || Object.keys(routeConfigs);\n\n  var getCustomActionCreators = config.getCustomActionCreators || defaultActionCreators;\n\n  var initialRouteParams = config.initialRouteParams;\n  var initialRouteName = config.initialRouteName || order[0];\n  var backBehavior = config.backBehavior || 'none';\n  var shouldBackNavigateToInitialRoute = backBehavior === 'initialRoute';\n  var resetOnBlur = config.hasOwnProperty('resetOnBlur') ? config.resetOnBlur : true;\n  var initialRouteIndex = order.indexOf(initialRouteName);\n  var childRouters = {};\n  order.forEach(routeName => {\n    childRouters[routeName] = null;\n    var screen = (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n    if (screen.router) {\n      childRouters[routeName] = screen.router;\n    }\n  });\n\n  function getParamsForRoute(routeName, params) {\n    var routeConfig = routeConfigs[routeName];\n    if (routeConfig && routeConfig.params) {\n      return _extends({}, routeConfig.params, params);\n    } else {\n      return params;\n    }\n  }\n\n  var {\n    getPathAndParamsForRoute,\n    getActionForPathAndParams\n  } = (0, _pathUtils.createPathParser)(childRouters, routeConfigs, config);\n\n  if (initialRouteIndex === -1) {\n    throw new Error(`Invalid initialRouteName '${initialRouteName}'.` + `Should be one of ${order.map(n => `\"${n}\"`).join(', ')}`);\n  }\n\n  function resetChildRoute(routeName) {\n    var initialParams = routeName === initialRouteName ? initialRouteParams : undefined;\n    // note(brentvatne): merging initialRouteParams *on top* of default params\n    // on the route seems incorrect but it's consistent with existing behavior\n    // in stackrouter\n    var params = getParamsForRoute(routeName, initialParams);\n    var childRouter = childRouters[routeName];\n    if (childRouter) {\n      var childAction = _NavigationActions2.default.init();\n      return _extends({}, childRouter.getStateForAction(childAction), {\n        key: routeName,\n        routeName,\n        params\n      });\n    }\n    return {\n      key: routeName,\n      routeName,\n      params\n    };\n  }\n\n  function getNextState(prevState, possibleNextState) {\n    if (!prevState) {\n      return possibleNextState;\n    }\n\n    var nextState = void 0;\n    if (prevState.index !== possibleNextState.index && resetOnBlur) {\n      var prevRouteName = prevState.routes[prevState.index].routeName;\n      var nextRoutes = [...possibleNextState.routes];\n      nextRoutes[prevState.index] = resetChildRoute(prevRouteName);\n\n      return _extends({}, possibleNextState, {\n        routes: nextRoutes\n      });\n    } else {\n      nextState = possibleNextState;\n    }\n\n    return nextState;\n  }\n\n  function getInitialState() {\n    var routes = order.map(resetChildRoute);\n    return {\n      routes,\n      index: initialRouteIndex,\n      isTransitioning: false\n    };\n  }\n\n  return {\n    childRouters,\n\n    getActionCreators(route, stateKey) {\n      return getCustomActionCreators(route, stateKey);\n    },\n\n    getStateForAction(action, inputState) {\n      var prevState = inputState ? _extends({}, inputState) : inputState;\n      var state = inputState || getInitialState();\n      var activeChildIndex = state.index;\n\n      if (action.type === _NavigationActions2.default.INIT) {\n        // NOTE(brentvatne): this seems weird... why are we merging these\n        // params into child routes?\n        // ---------------------------------------------------------------\n        // Merge any params from the action into all the child routes\n        var { params } = action;\n        if (params) {\n          state.routes = state.routes.map(route => _extends({}, route, {\n            params: _extends({}, route.params, params, route.routeName === initialRouteName ? initialRouteParams : null)\n          }));\n        }\n      }\n\n      // Let the current child handle it\n      var activeChildLastState = state.routes[state.index];\n      var activeChildRouter = childRouters[order[state.index]];\n      if (activeChildRouter) {\n        var activeChildState = activeChildRouter.getStateForAction(action, activeChildLastState);\n        if (!activeChildState && inputState) {\n          return null;\n        }\n        if (activeChildState && activeChildState !== activeChildLastState) {\n          var _routes = [...state.routes];\n          _routes[state.index] = activeChildState;\n          return getNextState(prevState, _extends({}, state, {\n            routes: _routes\n          }));\n        }\n      }\n\n      // Handle tab changing. Do this after letting the current tab try to\n      // handle the action, to allow inner children to change first\n      var isBackEligible = action.key == null || action.key === activeChildLastState.key;\n      if (action.type === _NavigationActions2.default.BACK) {\n        if (isBackEligible && shouldBackNavigateToInitialRoute) {\n          activeChildIndex = initialRouteIndex;\n        } else {\n          return state;\n        }\n      }\n\n      var didNavigate = false;\n      if (action.type === _NavigationActions2.default.NAVIGATE) {\n        didNavigate = !!order.find((childId, i) => {\n          if (childId === action.routeName) {\n            activeChildIndex = i;\n            return true;\n          }\n          return false;\n        });\n        if (didNavigate) {\n          var childState = state.routes[activeChildIndex];\n          var childRouter = childRouters[action.routeName];\n          var newChildState = childState;\n\n          if (action.action && childRouter) {\n            var childStateUpdate = childRouter.getStateForAction(action.action, childState);\n            if (childStateUpdate) {\n              newChildState = childStateUpdate;\n            }\n          }\n\n          if (action.params) {\n            newChildState = _extends({}, newChildState, {\n              params: _extends({}, newChildState.params || {}, action.params)\n            });\n          }\n\n          if (newChildState !== childState) {\n            var _routes2 = [...state.routes];\n            _routes2[activeChildIndex] = newChildState;\n            var nextState = _extends({}, state, {\n              routes: _routes2,\n              index: activeChildIndex\n            });\n            return getNextState(prevState, nextState);\n          } else if (newChildState === childState && state.index === activeChildIndex && prevState) {\n            return null;\n          }\n        }\n      }\n\n      if (action.type === _NavigationActions2.default.SET_PARAMS) {\n        var key = action.key;\n        var lastRoute = state.routes.find(route => route.key === key);\n        if (lastRoute) {\n          var _params = _extends({}, lastRoute.params, action.params);\n          var _routes3 = [...state.routes];\n          _routes3[state.routes.indexOf(lastRoute)] = _extends({}, lastRoute, {\n            params: _params\n          });\n          return getNextState(prevState, _extends({}, state, {\n            routes: _routes3\n          }));\n        }\n      }\n\n      if (activeChildIndex !== state.index) {\n        return getNextState(prevState, _extends({}, state, {\n          index: activeChildIndex\n        }));\n      } else if (didNavigate && !inputState) {\n        return state;\n      } else if (didNavigate) {\n        return _extends({}, state);\n      }\n\n      // Let other children handle it and switch to the first child that returns a new state\n      var index = state.index;\n      var routes = state.routes;\n      order.find((childId, i) => {\n        var childRouter = childRouters[childId];\n        if (i === index) {\n          return false;\n        }\n        var childState = routes[i];\n        if (childRouter) {\n          childState = childRouter.getStateForAction(action, childState);\n        }\n        if (!childState) {\n          index = i;\n          return true;\n        }\n        if (childState !== routes[i]) {\n          routes = [...routes];\n          routes[i] = childState;\n          index = i;\n          return true;\n        }\n        return false;\n      });\n\n      // Nested routers can be updated after switching children with actions such as SET_PARAMS\n      // and COMPLETE_TRANSITION.\n      // NOTE: This may be problematic with custom routers because we whitelist the actions\n      // that can be handled by child routers without automatically changing index.\n      if (childrenUpdateWithoutSwitchingIndex(action.type)) {\n        index = state.index;\n      }\n\n      if (index !== state.index || routes !== state.routes) {\n        return getNextState(prevState, _extends({}, state, {\n          index,\n          routes\n        }));\n      }\n      return state;\n    },\n\n    getComponentForState(state) {\n      var routeName = state.routes[state.index].routeName;\n      (0, _invariant2.default)(routeName, `There is no route defined for index ${state.index}. Check that\n        that you passed in a navigation state with a valid tab/screen index.`);\n      var childRouter = childRouters[routeName];\n      if (childRouter) {\n        return childRouter.getComponentForState(state.routes[state.index]);\n      }\n      return (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n    },\n\n    getComponentForRouteName(routeName) {\n      return (0, _getScreenForRouteName2.default)(routeConfigs, routeName);\n    },\n\n    getPathAndParamsForState(state) {\n      var route = state.routes[state.index];\n      return getPathAndParamsForRoute(route);\n    },\n\n    getActionForPathAndParams(path, params) {\n      return getActionForPathAndParams(path, params);\n    },\n\n    getScreenOptions: (0, _createConfigGetter2.default)(routeConfigs, config.defaultNavigationOptions)\n  };\n};"]},"metadata":{},"sourceType":"script"}