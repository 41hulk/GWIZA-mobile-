{"ast":null,"code":"var _interopRequireWildcard=require(\"@babel/runtime/helpers/interopRequireWildcard\");var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.captureRef=captureRef;exports.releaseCapture=releaseCapture;exports.captureScreen=captureScreen;exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf3=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _assertThisInitialized2=_interopRequireDefault(require(\"@babel/runtime/helpers/assertThisInitialized\"));var _objectSpread2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectSpread\"));var _react=_interopRequireWildcard(require(\"react\"));var _reactNative=require(\"react-native\");var RNViewShot=_reactNative.NativeModules.RNViewShot;var neverEndingPromise=new Promise(function(){});if(!RNViewShot){console.warn(\"NativeModules.RNViewShot is undefined. Make sure the library is linked on the native side.\");}var acceptedFormats=[\"png\",\"jpg\"].concat(_reactNative.Platform.OS===\"android\"?[\"webm\",\"raw\"]:[]);var acceptedResults=[\"tmpfile\",\"base64\",\"data-uri\"].concat(_reactNative.Platform.OS===\"android\"?[\"zip-base64\"]:[]);var defaultOptions={format:\"png\",quality:1,result:\"tmpfile\",snapshotContentContainer:false};function validateOptions(options){options=(0,_objectSpread2.default)({},defaultOptions,options);var errors=[];if(\"width\"in options&&(typeof options.width!==\"number\"||options.width<=0)){errors.push(\"option width should be a positive number\");delete options.width;}if(\"height\"in options&&(typeof options.height!==\"number\"||options.height<=0)){errors.push(\"option height should be a positive number\");delete options.height;}if(typeof options.quality!==\"number\"||options.quality<0||options.quality>1){errors.push(\"option quality should be a number between 0.0 and 1.0\");options.quality=defaultOptions.quality;}if(typeof options.snapshotContentContainer!==\"boolean\"){errors.push(\"option snapshotContentContainer should be a boolean\");}if(acceptedFormats.indexOf(options.format)===-1){options.format=defaultOptions.format;errors.push(\"option format '\"+options.format+\"' is not in valid formats: \"+acceptedFormats.join(\" | \"));}if(acceptedResults.indexOf(options.result)===-1){options.result=defaultOptions.result;errors.push(\"option result '\"+options.result+\"' is not in valid formats: \"+acceptedResults.join(\" | \"));}return{options:options,errors:errors};}function captureRef(view,optionsObject){if(typeof view!==\"number\"){var node=(0,_reactNative.findNodeHandle)(view);if(!node)return Promise.reject(new Error(\"findNodeHandle failed to resolve view=\"+String(view)));view=node;}var _validateOptions=validateOptions(optionsObject),options=_validateOptions.options,errors=_validateOptions.errors;if(__DEV__&&errors.length>0){console.warn(\"react-native-view-shot: bad options:\\n\"+errors.map(function(e){return\"- \"+e;}).join(\"\\n\"));}return RNViewShot.captureRef(view,options);}function releaseCapture(uri){if(typeof uri!==\"string\"){if(__DEV__){console.warn(\"Invalid argument to releaseCapture. Got: \"+uri);}}else{RNViewShot.releaseCapture(uri);}}function captureScreen(optionsObject){var _validateOptions2=validateOptions(optionsObject),options=_validateOptions2.options,errors=_validateOptions2.errors;if(__DEV__&&errors.length>0){console.warn(\"react-native-view-shot: bad options:\\n\"+errors.map(function(e){return\"- \"+e;}).join(\"\\n\"));}return RNViewShot.captureScreen(options);}function checkCompatibleProps(props){if(!props.captureMode&&props.onCapture){console.warn(\"react-native-view-shot: a captureMode prop must be provided for `onCapture`\");}else if(props.captureMode&&!props.onCapture){console.warn(\"react-native-view-shot: captureMode prop is defined but onCapture prop callback is missing\");}else if((props.captureMode===\"continuous\"||props.captureMode===\"update\")&&props.options&&props.options.result&&props.options.result!==\"tmpfile\"){console.warn(\"react-native-view-shot: result=tmpfile is recommended for captureMode=\"+props.captureMode);}}var ViewShot=function(_Component){(0,_inherits2.default)(ViewShot,_Component);function ViewShot(){var _getPrototypeOf2;var _this;(0,_classCallCheck2.default)(this,ViewShot);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=(0,_possibleConstructorReturn2.default)(this,(_getPrototypeOf2=(0,_getPrototypeOf3.default)(ViewShot)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.firstLayoutPromise=new Promise(function(resolve){_this.resolveFirstLayout=resolve;});_this.capture=function(){return _this.firstLayoutPromise.then(function(){var _assertThisInitialize=(0,_assertThisInitialized2.default)((0,_assertThisInitialized2.default)(_this)),root=_assertThisInitialize.root;if(!root)return neverEndingPromise;return captureRef(root,_this.props.options);}).then(function(uri){_this.onCapture(uri);return uri;},function(e){_this.onCaptureFailure(e);throw e;});};_this.onCapture=function(uri){if(!_this.root)return;if(_this.lastCapturedURI){setTimeout(releaseCapture,500,_this.lastCapturedURI);}_this.lastCapturedURI=uri;var onCapture=_this.props.onCapture;if(onCapture)onCapture(uri);};_this.onCaptureFailure=function(e){if(!_this.root)return;var onCaptureFailure=_this.props.onCaptureFailure;if(onCaptureFailure)onCaptureFailure(e);};_this.syncCaptureLoop=function(captureMode){cancelAnimationFrame(_this._raf);if(captureMode===\"continuous\"){var previousCaptureURI=\"-\";var loop=function loop(){_this._raf=requestAnimationFrame(loop);if(previousCaptureURI===_this.lastCapturedURI)return;previousCaptureURI=_this.lastCapturedURI;_this.capture();};_this._raf=requestAnimationFrame(loop);}};_this.onRef=function(ref){_this.root=ref;};_this.onLayout=function(e){var onLayout=_this.props.onLayout;_this.resolveFirstLayout(e.nativeEvent.layout);if(onLayout)onLayout(e);};return _this;}(0,_createClass2.default)(ViewShot,[{key:\"componentDidMount\",value:function componentDidMount(){if(__DEV__)checkCompatibleProps(this.props);if(this.props.captureMode===\"mount\"){this.capture();}else{this.syncCaptureLoop(this.props.captureMode);}}},{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){if(nextProps.captureMode!==this.props.captureMode){this.syncCaptureLoop(nextProps.captureMode);}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.props.captureMode===\"update\"){this.capture();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.syncCaptureLoop(null);}},{key:\"render\",value:function render(){var children=this.props.children;return _react.default.createElement(_reactNative.View,{ref:this.onRef,collapsable:false,onLayout:this.onLayout,style:this.props.style},children);}}]);return ViewShot;}(_react.Component);exports.default=ViewShot;ViewShot.captureRef=captureRef;ViewShot.releaseCapture=releaseCapture;","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/node_modules/react-native-view-shot/src/index.js"],"names":["RNViewShot","NativeModules","neverEndingPromise","Promise","console","warn","acceptedFormats","concat","Platform","OS","acceptedResults","defaultOptions","format","quality","result","snapshotContentContainer","validateOptions","options","errors","width","push","height","indexOf","join","captureRef","view","optionsObject","node","reject","Error","String","__DEV__","length","map","e","releaseCapture","uri","captureScreen","checkCompatibleProps","props","captureMode","onCapture","ViewShot","firstLayoutPromise","resolve","resolveFirstLayout","capture","then","root","onCaptureFailure","lastCapturedURI","setTimeout","syncCaptureLoop","cancelAnimationFrame","_raf","previousCaptureURI","loop","requestAnimationFrame","onRef","ref","onLayout","nativeEvent","layout","nextProps","children","style","Component"],"mappings":"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","sourcesContent":["//@flow\nimport React, { Component } from \"react\";\nimport { View, NativeModules, Platform, findNodeHandle } from \"react-native\";\nconst { RNViewShot } = NativeModules;\n\nconst neverEndingPromise = new Promise(() => {});\n\ntype Options = {\n  width?: number,\n  height?: number,\n  format: \"png\" | \"jpg\" | \"webm\" | \"raw\",\n  quality: number,\n  result: \"tmpfile\" | \"base64\" | \"data-uri\" | \"zip-base64\",\n  snapshotContentContainer: boolean\n};\n\nif (!RNViewShot) {\n  console.warn(\n    \"NativeModules.RNViewShot is undefined. Make sure the library is linked on the native side.\"\n  );\n}\n\nconst acceptedFormats = [\"png\", \"jpg\"].concat(\n  Platform.OS === \"android\" ? [\"webm\", \"raw\"] : []\n);\n\nconst acceptedResults = [\"tmpfile\", \"base64\", \"data-uri\"].concat(\n  Platform.OS === \"android\" ? [\"zip-base64\"] : []\n);\n\nconst defaultOptions = {\n  format: \"png\",\n  quality: 1,\n  result: \"tmpfile\",\n  snapshotContentContainer: false\n};\n\n// validate and coerce options\nfunction validateOptions(\n  options: ?Object\n): { options: Options, errors: Array<string> } {\n  options = {\n    ...defaultOptions,\n    ...options\n  };\n  const errors = [];\n  if (\n    \"width\" in options &&\n    (typeof options.width !== \"number\" || options.width <= 0)\n  ) {\n    errors.push(\"option width should be a positive number\");\n    delete options.width;\n  }\n  if (\n    \"height\" in options &&\n    (typeof options.height !== \"number\" || options.height <= 0)\n  ) {\n    errors.push(\"option height should be a positive number\");\n    delete options.height;\n  }\n  if (\n    typeof options.quality !== \"number\" ||\n    options.quality < 0 ||\n    options.quality > 1\n  ) {\n    errors.push(\"option quality should be a number between 0.0 and 1.0\");\n    options.quality = defaultOptions.quality;\n  }\n  if (typeof options.snapshotContentContainer !== \"boolean\") {\n    errors.push(\"option snapshotContentContainer should be a boolean\");\n  }\n  if (acceptedFormats.indexOf(options.format) === -1) {\n    options.format = defaultOptions.format;\n    errors.push(\n      \"option format '\" + options.format + \"' is not in valid formats: \" + acceptedFormats.join(\" | \")\n    );\n  }\n  if (acceptedResults.indexOf(options.result) === -1) {\n    options.result = defaultOptions.result;\n    errors.push(\n      \"option result '\" + options.result  + \"' is not in valid formats: \" + acceptedResults.join(\" | \")\n    );\n  }\n  return { options, errors };\n}\n\nexport function captureRef(\n  view: number | ReactElement<*>,\n  optionsObject?: Object\n): Promise<string> {\n  if (typeof view !== \"number\") {\n    const node = findNodeHandle(view);\n    if (!node)\n      return Promise.reject(\n        new Error(\"findNodeHandle failed to resolve view=\" + String(view))\n      );\n    view = node;\n  }\n  const { options, errors } = validateOptions(optionsObject);\n  if (__DEV__ && errors.length > 0) {\n    console.warn(\n      \"react-native-view-shot: bad options:\\n\" +\n        errors.map(e => `- ${e}`).join(\"\\n\")\n    );\n  }\n  return RNViewShot.captureRef(view, options);\n}\n\nexport function releaseCapture(uri: string): void {\n  if (typeof uri !== \"string\") {\n    if (__DEV__) {\n      console.warn(\"Invalid argument to releaseCapture. Got: \" + uri);\n    }\n  } else {\n    RNViewShot.releaseCapture(uri);\n  }\n}\n\nexport function captureScreen(\n  optionsObject?: Options\n): Promise<string> {\n  const { options, errors } = validateOptions(optionsObject);\n  if (__DEV__ && errors.length > 0) {\n    console.warn(\n      \"react-native-view-shot: bad options:\\n\" +\n        errors.map(e => `- ${e}`).join(\"\\n\")\n    );\n  }\n  return RNViewShot.captureScreen(options);\n}\n\ntype Props = {\n  options?: Object,\n  captureMode?: \"mount\" | \"continuous\" | \"update\",\n  children: React.Element<*>,\n  onLayout?: (e: *) => void,\n  onCapture?: (uri: string) => void,\n  onCaptureFailure?: (e: Error) => void\n};\n\nfunction checkCompatibleProps(props: Props) {\n  if (!props.captureMode && props.onCapture) {\n    console.warn(\n      \"react-native-view-shot: a captureMode prop must be provided for `onCapture`\"\n    );\n  } else if (props.captureMode && !props.onCapture) {\n    console.warn(\n      \"react-native-view-shot: captureMode prop is defined but onCapture prop callback is missing\"\n    );\n  } else if (\n    (props.captureMode === \"continuous\" || props.captureMode === \"update\") &&\n    props.options &&\n    props.options.result &&\n    props.options.result !== \"tmpfile\"\n  ) {\n    console.warn(\n      \"react-native-view-shot: result=tmpfile is recommended for captureMode=\" +\n        props.captureMode\n    );\n  }\n}\n\nexport default class ViewShot extends Component {\n  static captureRef = captureRef;\n  static releaseCapture = releaseCapture;\n  props: Props;\n  root: ?View;\n\n  _raf: *;\n  lastCapturedURI: ?string;\n\n  resolveFirstLayout: (layout: Object) => void;\n  firstLayoutPromise = new Promise(resolve => {\n    this.resolveFirstLayout = resolve;\n  });\n\n  capture = (): Promise<string> =>\n    this.firstLayoutPromise\n      .then(() => {\n        const { root } = this;\n        if (!root) return neverEndingPromise; // component is unmounted, you never want to hear back from the promise\n        return captureRef(root, this.props.options);\n      })\n      .then(\n        (uri: string) => {\n          this.onCapture(uri);\n          return uri;\n        },\n        (e: Error) => {\n          this.onCaptureFailure(e);\n          throw e;\n        }\n      );\n\n  onCapture = (uri: string) => {\n    if (!this.root) return;\n    if (this.lastCapturedURI) {\n      // schedule releasing the previous capture\n      setTimeout(releaseCapture, 500, this.lastCapturedURI);\n    }\n    this.lastCapturedURI = uri;\n    const { onCapture } = this.props;\n    if (onCapture) onCapture(uri);\n  };\n\n  onCaptureFailure = (e: Error) => {\n    if (!this.root) return;\n    const { onCaptureFailure } = this.props;\n    if (onCaptureFailure) onCaptureFailure(e);\n  };\n\n  syncCaptureLoop = (captureMode: ?string) => {\n    cancelAnimationFrame(this._raf);\n    if (captureMode === \"continuous\") {\n      let previousCaptureURI = \"-\"; // needs to capture at least once at first, so we use \"-\" arbitrary string\n      const loop = () => {\n        this._raf = requestAnimationFrame(loop);\n        if (previousCaptureURI === this.lastCapturedURI) return; // previous capture has not finished, don't capture yet\n        previousCaptureURI = this.lastCapturedURI;\n        this.capture();\n      };\n      this._raf = requestAnimationFrame(loop);\n    }\n  };\n\n  onRef = (ref: View) => {\n    this.root = ref;\n  };\n\n  onLayout = (e: { nativeEvent: { layout: Object } }) => {\n    const { onLayout } = this.props;\n    this.resolveFirstLayout(e.nativeEvent.layout);\n    if (onLayout) onLayout(e);\n  };\n\n  componentDidMount() {\n    if (__DEV__) checkCompatibleProps(this.props);\n    if (this.props.captureMode === \"mount\") {\n      this.capture();\n    } else {\n      this.syncCaptureLoop(this.props.captureMode);\n    }\n  }\n\n  componentWillReceiveProps(nextProps: Props) {\n    if (nextProps.captureMode !== this.props.captureMode) {\n      this.syncCaptureLoop(nextProps.captureMode);\n    }\n  }\n\n  componentDidUpdate() {\n    if (this.props.captureMode === \"update\") {\n      this.capture();\n    }\n  }\n\n  componentWillUnmount() {\n    this.syncCaptureLoop(null);\n  }\n\n  render() {\n    const { children } = this.props;\n    return (\n      <View ref={this.onRef} collapsable={false} onLayout={this.onLayout} style={this.props.style}>\n        {children}\n      </View>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"script"}