{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=createPointerEventsContainer;var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _react=_interopRequireDefault(require(\"react\"));var _invariant=_interopRequireDefault(require(\"../../utils/invariant\"));var MIN_POSITION_OFFSET=0.01;function createPointerEventsContainer(Component){var Container=function(_React$Component){(0,_inherits2.default)(Container,_React$Component);function Container(props,context){var _this;(0,_classCallCheck2.default)(this,Container);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(Container).call(this,props,context));_this._onComponentRef=function(component){_this._component=component;if(component){(0,_invariant.default)(typeof component.setNativeProps==='function','component must implement method `setNativeProps`');}};_this._onPositionChange=function(){if(_this._component){var pointerEvents=_this._computePointerEvents();if(_this._pointerEvents!==pointerEvents){_this._pointerEvents=pointerEvents;_this._component.setNativeProps({pointerEvents:pointerEvents});}}};_this._pointerEvents=_this._computePointerEvents();return _this;}(0,_createClass2.default)(Container,[{key:\"componentWillUnmount\",value:function componentWillUnmount(){this._positionListener&&this._positionListener.remove();}},{key:\"render\",value:function render(){this._bindPosition();this._pointerEvents=this._computePointerEvents();return _react.default.createElement(Component,(0,_extends2.default)({},this.props,{pointerEvents:this._pointerEvents,onComponentRef:this._onComponentRef}));}},{key:\"_bindPosition\",value:function _bindPosition(){this._positionListener&&this._positionListener.remove();this._positionListener=new AnimatedValueSubscription(this.props.realPosition,this._onPositionChange);}},{key:\"_computePointerEvents\",value:function _computePointerEvents(){var _this$props=this.props,navigation=_this$props.navigation,realPosition=_this$props.realPosition,scene=_this$props.scene;if(scene.isStale||navigation.state.index!==scene.index){return scene.index>navigation.state.index?'box-only':'none';}var offset=realPosition.__getAnimatedValue()-navigation.state.index;if(Math.abs(offset)>MIN_POSITION_OFFSET){return'box-only';}return'auto';}}]);return Container;}(_react.default.Component);return Container;}var AnimatedValueSubscription=function(){function AnimatedValueSubscription(value,callback){(0,_classCallCheck2.default)(this,AnimatedValueSubscription);this._value=value;this._token=value.addListener(callback);}(0,_createClass2.default)(AnimatedValueSubscription,[{key:\"remove\",value:function remove(){this._value.removeListener(this._token);}}]);return AnimatedValueSubscription;}();","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/node_modules/react-navigation-stack/dist/views/StackView/createPointerEventsContainer.js"],"names":["MIN_POSITION_OFFSET","createPointerEventsContainer","Component","Container","props","context","_onComponentRef","component","_component","setNativeProps","_onPositionChange","pointerEvents","_computePointerEvents","_pointerEvents","_positionListener","remove","_bindPosition","AnimatedValueSubscription","realPosition","navigation","scene","isStale","state","index","offset","__getAnimatedValue","Math","abs","React","value","callback","_value","_token","addListener","removeListener"],"mappings":"muBAAA,oDACA,wEAEA,GAAMA,CAAAA,mBAAmB,CAAG,IAA5B,CAOe,QAASC,CAAAA,4BAAT,CAAsCC,SAAtC,CAAiD,IACxDC,CAAAA,SADwD,+EAE5D,mBAAYC,KAAZ,CAAmBC,OAAnB,CAA4B,wDAC1B,qGAAMD,KAAN,CAAaC,OAAb,GAD0B,MAgB5BC,eAhB4B,CAgBV,SAAAC,SAAS,CAAI,CAC7B,MAAKC,UAAL,CAAkBD,SAAlB,CACA,GAAIA,SAAJ,CAAe,CACb,uBAAU,MAAOA,CAAAA,SAAS,CAACE,cAAjB,GAAoC,UAA9C,CAA0D,kDAA1D,EACD,CACF,CArB2B,OA4B5BC,iBA5B4B,CA4BR,UAAqB,CAMvC,GAAI,MAAKF,UAAT,CAAqB,CACnB,GAAMG,CAAAA,aAAa,CAAG,MAAKC,qBAAL,EAAtB,CACA,GAAI,MAAKC,cAAL,GAAwBF,aAA5B,CAA2C,CACzC,MAAKE,cAAL,CAAsBF,aAAtB,CACA,MAAKH,UAAL,CAAgBC,cAAhB,CAA+B,CAAEE,aAAa,CAAbA,aAAF,CAA/B,EACD,CACF,CACF,CAzC2B,CAE1B,MAAKE,cAAL,CAAsB,MAAKD,qBAAL,EAAtB,CAF0B,aAG3B,CAL2D,sGAOrC,CACrB,KAAKE,iBAAL,EAA0B,KAAKA,iBAAL,CAAuBC,MAAvB,EAA1B,CACD,CAT2D,uCAWnD,CACP,KAAKC,aAAL,GACA,KAAKH,cAAL,CAAsB,KAAKD,qBAAL,EAAtB,CAEA,MAAO,8BAAC,SAAD,0BAAe,KAAKR,KAApB,EAA2B,aAAa,CAAE,KAAKS,cAA/C,CAA+D,cAAc,CAAE,KAAKP,eAApF,GAAP,CACD,CAhB2D,qDAyB5C,CACd,KAAKQ,iBAAL,EAA0B,KAAKA,iBAAL,CAAuBC,MAAvB,EAA1B,CACA,KAAKD,iBAAL,CAAyB,GAAIG,CAAAA,yBAAJ,CAA8B,KAAKb,KAAL,CAAWc,YAAzC,CAAuD,KAAKR,iBAA5D,CAAzB,CACD,CA5B2D,qEA6CpC,iBACsB,KAAKN,KAD3B,CACde,UADc,aACdA,UADc,CACFD,YADE,aACFA,YADE,CACYE,KADZ,aACYA,KADZ,CAGtB,GAAIA,KAAK,CAACC,OAAN,EAAiBF,UAAU,CAACG,KAAX,CAAiBC,KAAjB,GAA2BH,KAAK,CAACG,KAAtD,CAA6D,CAE3D,MAAOH,CAAAA,KAAK,CAACG,KAAN,CAAcJ,UAAU,CAACG,KAAX,CAAiBC,KAA/B,CAAuC,UAAvC,CAAoD,MAA3D,CACD,CAED,GAAMC,CAAAA,MAAM,CAAGN,YAAY,CAACO,kBAAb,GAAoCN,UAAU,CAACG,KAAX,CAAiBC,KAApE,CACA,GAAIG,IAAI,CAACC,GAAL,CAASH,MAAT,EAAmBxB,mBAAvB,CAA4C,CAI1C,MAAO,UAAP,CACD,CAED,MAAO,MAAP,CACD,CA9D2D,uBACtC4B,eAAM1B,SADgC,EAgE9D,MAAOC,CAAAA,SAAP,CACD,C,GAEKc,CAAAA,yB,YACJ,mCAAYY,KAAZ,CAAmBC,QAAnB,CAA6B,8DAC3B,KAAKC,MAAL,CAAcF,KAAd,CACA,KAAKG,MAAL,CAAcH,KAAK,CAACI,WAAN,CAAkBH,QAAlB,CAAd,CACD,C,0FAEQ,CACP,KAAKC,MAAL,CAAYG,cAAZ,CAA2B,KAAKF,MAAhC,EACD,C","sourcesContent":["import React from 'react';\nimport invariant from '../../utils/invariant';\n\nconst MIN_POSITION_OFFSET = 0.01;\n\n/**\n * Create a higher-order component that automatically computes the\n * `pointerEvents` property for a component whenever navigation position\n * changes.\n */\nexport default function createPointerEventsContainer(Component) {\n  class Container extends React.Component {\n    constructor(props, context) {\n      super(props, context);\n      this._pointerEvents = this._computePointerEvents();\n    }\n\n    componentWillUnmount() {\n      this._positionListener && this._positionListener.remove();\n    }\n\n    render() {\n      this._bindPosition();\n      this._pointerEvents = this._computePointerEvents();\n\n      return <Component {...this.props} pointerEvents={this._pointerEvents} onComponentRef={this._onComponentRef} />;\n    }\n\n    _onComponentRef = component => {\n      this._component = component;\n      if (component) {\n        invariant(typeof component.setNativeProps === 'function', 'component must implement method `setNativeProps`');\n      }\n    };\n\n    _bindPosition() {\n      this._positionListener && this._positionListener.remove();\n      this._positionListener = new AnimatedValueSubscription(this.props.realPosition, this._onPositionChange);\n    }\n\n    _onPositionChange = () => /* { value } */{\n      // This should log each frame when releasing the gesture or when pressing\n      // the back button! If not, something has gone wrong with the animated\n      // value subscription\n      // console.log(value);\n\n      if (this._component) {\n        const pointerEvents = this._computePointerEvents();\n        if (this._pointerEvents !== pointerEvents) {\n          this._pointerEvents = pointerEvents;\n          this._component.setNativeProps({ pointerEvents });\n        }\n      }\n    };\n\n    _computePointerEvents() {\n      const { navigation, realPosition, scene } = this.props;\n\n      if (scene.isStale || navigation.state.index !== scene.index) {\n        // The scene isn't focused.\n        return scene.index > navigation.state.index ? 'box-only' : 'none';\n      }\n\n      const offset = realPosition.__getAnimatedValue() - navigation.state.index;\n      if (Math.abs(offset) > MIN_POSITION_OFFSET) {\n        // The positon is still away from scene's index.\n        // Scene's children should not receive touches until the position\n        // is close enough to scene's index.\n        return 'box-only';\n      }\n\n      return 'auto';\n    }\n  }\n  return Container;\n}\n\nclass AnimatedValueSubscription {\n  constructor(value, callback) {\n    this._value = value;\n    this._token = value.addListener(callback);\n  }\n\n  remove() {\n    this._value.removeListener(this._token);\n  }\n}"]},"metadata":{},"sourceType":"script"}