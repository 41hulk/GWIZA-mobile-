{"ast":null,"code":"'use strict';var _classCallCheck=require(\"@babel/runtime/helpers/classCallCheck\");var _createClass=require(\"@babel/runtime/helpers/createClass\");var _possibleConstructorReturn=require(\"@babel/runtime/helpers/possibleConstructorReturn\");var _getPrototypeOf=require(\"@babel/runtime/helpers/getPrototypeOf\");var _inherits=require(\"@babel/runtime/helpers/inherits\");var EventTarget=require('event-target-shim');var Blob=require(\"./Blob\");var _require=require(\"../BatchedBridge/NativeModules\"),FileReaderModule=_require.FileReaderModule;var READER_EVENTS=['abort','error','load','loadstart','loadend','progress'];var EMPTY=0;var LOADING=1;var DONE=2;var FileReader=function(_EventTarget){_inherits(FileReader,_EventTarget);function FileReader(){var _this;_classCallCheck(this,FileReader);_this=_possibleConstructorReturn(this,_getPrototypeOf(FileReader).call(this));_this.EMPTY=EMPTY;_this.LOADING=LOADING;_this.DONE=DONE;_this._aborted=false;_this._subscriptions=[];_this._reset();return _this;}_createClass(FileReader,[{key:\"_reset\",value:function _reset(){this._readyState=EMPTY;this._error=null;this._result=null;}},{key:\"_clearSubscriptions\",value:function _clearSubscriptions(){this._subscriptions.forEach(function(sub){return sub.remove();});this._subscriptions=[];}},{key:\"_setReadyState\",value:function _setReadyState(newState){this._readyState=newState;this.dispatchEvent({type:'readystatechange'});if(newState===DONE){if(this._aborted){this.dispatchEvent({type:'abort'});}else if(this._error){this.dispatchEvent({type:'error'});}else{this.dispatchEvent({type:'load'});}this.dispatchEvent({type:'loadend'});}}},{key:\"readAsArrayBuffer\",value:function readAsArrayBuffer(){throw new Error('FileReader.readAsArrayBuffer is not implemented');}},{key:\"readAsDataURL\",value:function readAsDataURL(blob){var _this2=this;this._aborted=false;FileReaderModule.readAsDataURL(blob.data).then(function(text){if(_this2._aborted){return;}_this2._result=text;_this2._setReadyState(DONE);},function(error){if(_this2._aborted){return;}_this2._error=error;_this2._setReadyState(DONE);});}},{key:\"readAsText\",value:function readAsText(blob){var _this3=this;var encoding=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'UTF-8';this._aborted=false;FileReaderModule.readAsText(blob.data,encoding).then(function(text){if(_this3._aborted){return;}_this3._result=text;_this3._setReadyState(DONE);},function(error){if(_this3._aborted){return;}_this3._error=error;_this3._setReadyState(DONE);});}},{key:\"abort\",value:function abort(){this._aborted=true;if(this._readyState!==EMPTY&&this._readyState!==DONE){this._reset();this._setReadyState(DONE);}this._reset();}},{key:\"readyState\",get:function get(){return this._readyState;}},{key:\"error\",get:function get(){return this._error;}},{key:\"result\",get:function get(){return this._result;}}]);return FileReader;}(EventTarget.apply(void 0,READER_EVENTS));FileReader.EMPTY=EMPTY;FileReader.LOADING=LOADING;FileReader.DONE=DONE;module.exports=FileReader;","map":{"version":3,"sources":["/Users/ntareguy/Downloads/gwizamobile1/node_modules/react-native/Libraries/Blob/FileReader.js"],"names":["EventTarget","require","Blob","FileReaderModule","READER_EVENTS","EMPTY","LOADING","DONE","FileReader","_aborted","_subscriptions","_reset","_readyState","_error","_result","forEach","sub","remove","newState","dispatchEvent","type","Error","blob","readAsDataURL","data","then","text","_setReadyState","error","encoding","readAsText","module","exports"],"mappings":"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","sourcesContent":["/**\n * Copyright (c) 2015-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @flow\n * @format\n */\n\n'use strict';\n\nconst EventTarget = require('event-target-shim');\nconst Blob = require('./Blob');\nconst {FileReaderModule} = require('../BatchedBridge/NativeModules');\n\ntype ReadyState =\n  | 0 // EMPTY\n  | 1 // LOADING\n  | 2; // DONE\n\ntype ReaderResult = string | ArrayBuffer;\n\nconst READER_EVENTS = [\n  'abort',\n  'error',\n  'load',\n  'loadstart',\n  'loadend',\n  'progress',\n];\n\nconst EMPTY = 0;\nconst LOADING = 1;\nconst DONE = 2;\n\nclass FileReader extends EventTarget(...READER_EVENTS) {\n  static EMPTY = EMPTY;\n  static LOADING = LOADING;\n  static DONE = DONE;\n\n  EMPTY = EMPTY;\n  LOADING = LOADING;\n  DONE = DONE;\n\n  _readyState: ReadyState;\n  _error: ?Error;\n  _result: ?ReaderResult;\n  _aborted: boolean = false;\n  _subscriptions: Array<*> = [];\n\n  constructor() {\n    super();\n    this._reset();\n  }\n\n  _reset(): void {\n    this._readyState = EMPTY;\n    this._error = null;\n    this._result = null;\n  }\n\n  _clearSubscriptions(): void {\n    this._subscriptions.forEach(sub => sub.remove());\n    this._subscriptions = [];\n  }\n\n  _setReadyState(newState: ReadyState) {\n    this._readyState = newState;\n    this.dispatchEvent({type: 'readystatechange'});\n    if (newState === DONE) {\n      if (this._aborted) {\n        this.dispatchEvent({type: 'abort'});\n      } else if (this._error) {\n        this.dispatchEvent({type: 'error'});\n      } else {\n        this.dispatchEvent({type: 'load'});\n      }\n      this.dispatchEvent({type: 'loadend'});\n    }\n  }\n\n  readAsArrayBuffer() {\n    throw new Error('FileReader.readAsArrayBuffer is not implemented');\n  }\n\n  readAsDataURL(blob: Blob) {\n    this._aborted = false;\n\n    FileReaderModule.readAsDataURL(blob.data).then(\n      (text: string) => {\n        if (this._aborted) {\n          return;\n        }\n        this._result = text;\n        this._setReadyState(DONE);\n      },\n      error => {\n        if (this._aborted) {\n          return;\n        }\n        this._error = error;\n        this._setReadyState(DONE);\n      },\n    );\n  }\n\n  readAsText(blob: Blob, encoding: string = 'UTF-8') {\n    this._aborted = false;\n\n    FileReaderModule.readAsText(blob.data, encoding).then(\n      (text: string) => {\n        if (this._aborted) {\n          return;\n        }\n        this._result = text;\n        this._setReadyState(DONE);\n      },\n      error => {\n        if (this._aborted) {\n          return;\n        }\n        this._error = error;\n        this._setReadyState(DONE);\n      },\n    );\n  }\n\n  abort() {\n    this._aborted = true;\n    // only call onreadystatechange if there is something to abort, as per spec\n    if (this._readyState !== EMPTY && this._readyState !== DONE) {\n      this._reset();\n      this._setReadyState(DONE);\n    }\n    // Reset again after, in case modified in handler\n    this._reset();\n  }\n\n  get readyState(): ReadyState {\n    return this._readyState;\n  }\n\n  get error(): ?Error {\n    return this._error;\n  }\n\n  get result(): ?ReaderResult {\n    return this._result;\n  }\n}\n\nmodule.exports = FileReader;\n"]},"metadata":{},"sourceType":"script"}