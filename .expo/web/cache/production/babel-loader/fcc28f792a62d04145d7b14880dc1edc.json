{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.SwipeRow=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _jsxFileName=\"src/basic/SwipeRow.js\";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require(\"react\");var _react2=_interopRequireDefault(_react);var _propTypes=require(\"prop-types\");var _propTypes2=_interopRequireDefault(_propTypes);var _reactNative=require(\"react-native\");var _nativeBaseShoutemTheme=require(\"native-base-shoutem-theme\");var _Text=require(\"./Text\");var _Left=require(\"./Left\");var _Right=require(\"./Right\");var _Body=require(\"./Body\");var _ListItem=require(\"./ListItem\");var _mapPropsToStyleNames=require(\"../utils/mapPropsToStyleNames\");var _mapPropsToStyleNames2=_interopRequireDefault(_mapPropsToStyleNames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var PREVIEW_OPEN_DELAY=700;var PREVIEW_CLOSE_DELAY=300;var SwipeRow=function(_Component){_inherits(SwipeRow,_Component);function SwipeRow(props){_classCallCheck(this,SwipeRow);var _this=_possibleConstructorReturn(this,(SwipeRow.__proto__||Object.getPrototypeOf(SwipeRow)).call(this,props));_this.horizontalSwipeGestureBegan=false;_this.swipeInitialX=null;_this.parentScrollEnabled=true;_this.ranPreview=false;_this.state={dimensionsSet:false,hiddenHeight:0,hiddenWidth:0};_this._translateX=new _reactNative.Animated.Value(0);return _this;}_createClass(SwipeRow,[{key:\"componentWillMount\",value:function componentWillMount(){var _this2=this;this._panResponder=_reactNative.PanResponder.create({onMoveShouldSetPanResponder:function onMoveShouldSetPanResponder(e,gs){return _this2.handleOnMoveShouldSetPanResponder(e,gs);},onPanResponderMove:function onPanResponderMove(e,gs){return _this2.handlePanResponderMove(e,gs);},onPanResponderRelease:function onPanResponderRelease(e,gs){return _this2.handlePanResponderEnd(e,gs);},onPanResponderTerminate:function onPanResponderTerminate(e,gs){return _this2.handlePanResponderEnd(e,gs);},onShouldBlockNativeResponder:function onShouldBlockNativeResponder(_){return false;}});}},{key:\"getPreviewAnimation\",value:function getPreviewAnimation(toValue,delay){return _reactNative.Animated.timing(this._translateX,{duration:this.props.previewDuration,toValue:toValue,delay:delay});}},{key:\"onContentLayout\",value:function onContentLayout(e){var _this3=this;this.setState({dimensionsSet:!this.props.recalculateHiddenLayout,hiddenHeight:e.nativeEvent.layout.height,hiddenWidth:e.nativeEvent.layout.width});if(this.props.preview&&!this.ranPreview){this.ranPreview=true;var previewOpenValue=this.props.previewOpenValue||this.props.rightOpenValue*0.5;this.getPreviewAnimation(previewOpenValue,PREVIEW_OPEN_DELAY).start(function(_){_this3.getPreviewAnimation(0,PREVIEW_CLOSE_DELAY).start();});}}},{key:\"handleOnMoveShouldSetPanResponder\",value:function handleOnMoveShouldSetPanResponder(e,gs){var dx=gs.dx;return Math.abs(dx)>this.props.directionalDistanceChangeThreshold;}},{key:\"handlePanResponderMove\",value:function handlePanResponderMove(e,gestureState){var dx=gestureState.dx,dy=gestureState.dy;var absDx=Math.abs(dx);var absDy=Math.abs(dy);if(absDx>this.props.directionalDistanceChangeThreshold||absDy>this.props.directionalDistanceChangeThreshold){if(absDy>absDx&&!this.horizontalSwipeGestureBegan){return;}if(this.parentScrollEnabled){this.parentScrollEnabled=false;this.props.setScrollEnabled&&this.props.setScrollEnabled(false);}if(this.swipeInitialX===null){this.swipeInitialX=this._translateX._value;}if(!this.horizontalSwipeGestureBegan){this.horizontalSwipeGestureBegan=true;this.props.swipeGestureBegan&&this.props.swipeGestureBegan();}var newDX=this.swipeInitialX+dx;if(this.props.disableLeftSwipe&&newDX<0){newDX=0;}if(this.props.disableRightSwipe&&newDX>0){newDX=0;}if(this.props.stopLeftSwipe&&newDX>this.props.stopLeftSwipe){newDX=this.props.stopLeftSwipe;}if(this.props.stopRightSwipe&&newDX<this.props.stopRightSwipe){newDX=this.props.stopRightSwipe;}this._translateX.setValue(newDX);}}},{key:\"handlePanResponderEnd\",value:function handlePanResponderEnd(e,gestureState){if(!this.parentScrollEnabled){this.parentScrollEnabled=true;this.props.setScrollEnabled&&this.props.setScrollEnabled(true);}var toValue=0;if(this._translateX._value>=0){if(this._translateX._value>this.props.leftOpenValue*(this.props.swipeToOpenPercent/100)){toValue=this.props.leftOpenValue;}}else{if(this._translateX._value<this.props.rightOpenValue*(this.props.swipeToOpenPercent/100)){toValue=this.props.rightOpenValue;}}this.manuallySwipeRow(toValue);}},{key:\"closeRow\",value:function closeRow(){this.manuallySwipeRow(0);}},{key:\"openLeftRow\",value:function openLeftRow(){this.manuallySwipeRow(this.props.leftOpenValue);}},{key:\"openRightRow\",value:function openRightRow(){this.manuallySwipeRow(this.props.rightOpenValue);}},{key:\"manuallySwipeRow\",value:function manuallySwipeRow(toValue){var _this4=this;_reactNative.Animated.spring(this._translateX,{toValue:toValue,friction:this.props.friction,tension:this.props.tension}).start(function(_){if(toValue===0){_this4.props.onRowDidClose&&_this4.props.onRowDidClose();}else{_this4.props.onRowDidOpen&&_this4.props.onRowDidOpen();}});if(toValue===0){this.props.onRowClose&&this.props.onRowClose();}else{this.props.onRowOpen&&this.props.onRowOpen(toValue);}this.swipeInitialX=null;this.horizontalSwipeGestureBegan=false;}},{key:\"renderMainContent\",value:function renderMainContent(){var _this5=this;if(this.state.dimensionsSet){return _react2.default.createElement(_reactNative.Animated.View,_extends({},this._panResponder.panHandlers,{style:{transform:[{translateX:this._translateX}],zIndex:2},__source:{fileName:_jsxFileName,lineNumber:199}}),!this.props.list?_react2.default.createElement(_ListItem.ListItem,{list:true,style:this.props.style,__source:{fileName:_jsxFileName,lineNumber:207}},this.props.body):_react2.default.createElement(_reactNative.View,{style:[{backgroundColor:'#FFF'},this.props.style],__source:{fileName:_jsxFileName,lineNumber:210}},this.props.body));}else{return _react2.default.createElement(_reactNative.Animated.View,_extends({},this._panResponder.panHandlers,{onLayout:function onLayout(e){return _this5.onContentLayout(e);},style:{transform:[{translateX:this._translateX}],zIndex:2},__source:{fileName:_jsxFileName,lineNumber:217}}),!this.props.list?_react2.default.createElement(_ListItem.ListItem,{list:true,style:this.props.style,__source:{fileName:_jsxFileName,lineNumber:226}},this.props.body):_react2.default.createElement(_reactNative.View,{style:[{backgroundColor:'#FFF'},this.props.style],__source:{fileName:_jsxFileName,lineNumber:229}},this.props.body));}}},{key:\"render\",value:function render(){return _react2.default.createElement(_reactNative.View,{style:this.props.style?this.props.style:undefined,__source:{fileName:_jsxFileName,lineNumber:239}},_react2.default.createElement(_reactNative.View,{style:[styles.hidden,{height:this.state.hiddenHeight,flex:1,flexDirection:\"row\",justifyContent:\"space-between\"}],__source:{fileName:_jsxFileName,lineNumber:240}},_react2.default.createElement(_Left.Left,{style:{width:this.props.leftOpenValue,zIndex:1},__source:{fileName:_jsxFileName,lineNumber:251}},this.props.left),_react2.default.createElement(_Body.Body,{style:{flex:0},__source:{fileName:_jsxFileName,lineNumber:254}}),_react2.default.createElement(_Right.Right,{style:{width:-this.props.rightOpenValue,zIndex:1},__source:{fileName:_jsxFileName,lineNumber:255}},this.props.right)),this.renderMainContent());}}]);return SwipeRow;}(_react.Component);SwipeRow.defaultProps={leftOpenValue:0,rightOpenValue:0,closeOnRowPress:true,disableLeftSwipe:false,disableRightSwipe:false,recalculateHiddenLayout:false,preview:false,previewDuration:300,directionalDistanceChangeThreshold:2,swipeToOpenPercent:50};var styles={container:{},hidden:{bottom:0,left:0,overflow:\"hidden\",position:\"absolute\",right:0,top:0}};var StyledSwipeRow=(0,_nativeBaseShoutemTheme.connectStyle)(\"NativeBase.SwipeRow\",{},_mapPropsToStyleNames2.default)(SwipeRow);exports.SwipeRow=StyledSwipeRow;","map":{"version":3,"sources":["../../../src/basic/SwipeRow.js"],"names":["PREVIEW_OPEN_DELAY","PREVIEW_CLOSE_DELAY","SwipeRow","Component","defaultProps","leftOpenValue","rightOpenValue","closeOnRowPress","disableLeftSwipe","disableRightSwipe","recalculateHiddenLayout","preview","previewDuration","directionalDistanceChangeThreshold","swipeToOpenPercent","dimensionsSet","hiddenHeight","hiddenWidth","Animated","PanResponder","onMoveShouldSetPanResponder","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","onShouldBlockNativeResponder","toValue","delay","duration","e","previewOpenValue","gs","dx","Math","gestureState","dy","absDx","absDy","newDX","friction","tension","transform","translateX","zIndex","backgroundColor","styles","height","flex","flexDirection","justifyContent","width","container","hidden","bottom","left","overflow","position","right","top","StyledSwipeRow","mapPropsToStyleNames"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Animated, PanResponder, Platform, StyleSheet, TouchableOpacity, View } from \"react-native\";\nimport { connectStyle } from \"native-base-shoutem-theme\";\nimport { Text } from \"./Text\";\nimport { Left } from \"./Left\";\nimport { Right } from \"./Right\";\nimport { Body } from \"./Body\";\nimport { ListItem } from \"./ListItem\";\nimport mapPropsToStyleNames from \"../utils/mapPropsToStyleNames\";\n\nconst PREVIEW_OPEN_DELAY = 700;\nconst PREVIEW_CLOSE_DELAY = 300;\n\nclass SwipeRow extends Component {\n  static defaultProps = {\n    leftOpenValue: 0,\n    rightOpenValue: 0,\n    closeOnRowPress: true,\n    disableLeftSwipe: false,\n    disableRightSwipe: false,\n    recalculateHiddenLayout: false,\n    preview: false,\n    previewDuration: 300,\n    directionalDistanceChangeThreshold: 2,\n    swipeToOpenPercent: 50,\n  };\n  constructor(props) {\n    super(props);\n    this.horizontalSwipeGestureBegan = false;\n    this.swipeInitialX = null;\n    this.parentScrollEnabled = true;\n    this.ranPreview = false;\n    this.state = {\n      dimensionsSet: false,\n      hiddenHeight: 0,\n      hiddenWidth: 0,\n    };\n    this._translateX = new Animated.Value(0);\n  }\n\n  componentWillMount() {\n    this._panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: (e, gs) => this.handleOnMoveShouldSetPanResponder(e, gs),\n      onPanResponderMove: (e, gs) => this.handlePanResponderMove(e, gs),\n      onPanResponderRelease: (e, gs) => this.handlePanResponderEnd(e, gs),\n      onPanResponderTerminate: (e, gs) => this.handlePanResponderEnd(e, gs),\n      onShouldBlockNativeResponder: _ => false,\n    });\n  }\n\n  getPreviewAnimation(toValue, delay) {\n    return Animated.timing(this._translateX, { duration: this.props.previewDuration, toValue, delay });\n  }\n\n  onContentLayout(e) {\n    this.setState({\n      dimensionsSet: !this.props.recalculateHiddenLayout,\n      hiddenHeight: e.nativeEvent.layout.height,\n      hiddenWidth: e.nativeEvent.layout.width,\n    });\n\n    if (this.props.preview && !this.ranPreview) {\n      this.ranPreview = true;\n      let previewOpenValue = this.props.previewOpenValue || this.props.rightOpenValue * 0.5;\n      this.getPreviewAnimation(previewOpenValue, PREVIEW_OPEN_DELAY).start(_ => {\n        this.getPreviewAnimation(0, PREVIEW_CLOSE_DELAY).start();\n      });\n    }\n  }\n\n  handleOnMoveShouldSetPanResponder(e, gs) {\n    const { dx } = gs;\n    return Math.abs(dx) > this.props.directionalDistanceChangeThreshold;\n  }\n\n  handlePanResponderMove(e, gestureState) {\n    const { dx, dy } = gestureState;\n    const absDx = Math.abs(dx);\n    const absDy = Math.abs(dy);\n\n\t\t// this check may not be necessary because we don't capture the move until we pass the threshold\n\t\t// just being extra safe here\n    if (\n\t\t\tabsDx > this.props.directionalDistanceChangeThreshold ||\n\t\t\tabsDy > this.props.directionalDistanceChangeThreshold\n\t\t) {\n\t\t\t// we have enough to determine direction\n      if (absDy > absDx && !this.horizontalSwipeGestureBegan) {\n\t\t\t\t// user is moving vertically, do nothing, listView will handle\n        return;\n      }\n\n\t\t\t// user is moving horizontally\n      if (this.parentScrollEnabled) {\n\t\t\t\t// disable scrolling on the listView parent\n        this.parentScrollEnabled = false;\n        this.props.setScrollEnabled && this.props.setScrollEnabled(false);\n      }\n\n      if (this.swipeInitialX === null) {\n\t\t\t\t// set tranlateX value when user started swiping\n        this.swipeInitialX = this._translateX._value;\n      }\n      if (!this.horizontalSwipeGestureBegan) {\n        this.horizontalSwipeGestureBegan = true;\n        this.props.swipeGestureBegan && this.props.swipeGestureBegan();\n      }\n\n      let newDX = this.swipeInitialX + dx;\n      if (this.props.disableLeftSwipe && newDX < 0) {\n        newDX = 0;\n      }\n      if (this.props.disableRightSwipe && newDX > 0) {\n        newDX = 0;\n      }\n\n      if (this.props.stopLeftSwipe && newDX > this.props.stopLeftSwipe) {\n        newDX = this.props.stopLeftSwipe;\n      }\n      if (this.props.stopRightSwipe && newDX < this.props.stopRightSwipe) {\n        newDX = this.props.stopRightSwipe;\n      }\n\n      this._translateX.setValue(newDX);\n    }\n  }\n\n  handlePanResponderEnd(e, gestureState) {\n\t\t// re-enable scrolling on listView parent\n    if (!this.parentScrollEnabled) {\n      this.parentScrollEnabled = true;\n      this.props.setScrollEnabled && this.props.setScrollEnabled(true);\n    }\n\n\t\t// finish up the animation\n    let toValue = 0;\n    if (this._translateX._value >= 0) {\n\t\t\t// trying to open right\n      if (this._translateX._value > this.props.leftOpenValue * (this.props.swipeToOpenPercent / 100)) {\n\t\t\t\t// we're more than halfway\n        toValue = this.props.leftOpenValue;\n      }\n    } else {\n\t\t\t// trying to open left\n      if (this._translateX._value < this.props.rightOpenValue * (this.props.swipeToOpenPercent / 100)) {\n\t\t\t\t// we're more than halfway\n        toValue = this.props.rightOpenValue;\n      }\n    }\n\n    this.manuallySwipeRow(toValue);\n  }\n\n\t/*\n\t * This method is called by SwipeListView\n\t */\n  closeRow() {\n    this.manuallySwipeRow(0);\n  }\n\n\topenLeftRow() {\n\t\tthis.manuallySwipeRow(this.props.leftOpenValue);\n\t}\n\n\topenRightRow() {\n\t\tthis.manuallySwipeRow(this.props.rightOpenValue);\n\t}\n\n\tmanuallySwipeRow(toValue) {\n\t\tAnimated.spring(this._translateX, {\n\t\t\ttoValue,\n\t\t\tfriction: this.props.friction,\n\t\t\ttension: this.props.tension,\n\t\t}).start(_ => {\n\t\t\tif (toValue === 0) {\n\t\t\t\tthis.props.onRowDidClose && this.props.onRowDidClose();\n\t\t\t} else {\n\t\t\t\tthis.props.onRowDidOpen && this.props.onRowDidOpen();\n\t\t\t}\n\t\t});\n\n    if (toValue === 0) {\n      this.props.onRowClose && this.props.onRowClose();\n    } else {\n      this.props.onRowOpen && this.props.onRowOpen(toValue);\n    }\n\n\t\t// reset everything\n    this.swipeInitialX = null;\n    this.horizontalSwipeGestureBegan = false;\n  }\n\n  renderMainContent() {\n\t\t// We do this annoying if statement for performance.\n\t\t// We don't want the onLayout func to run after it runs once.\n    if (this.state.dimensionsSet) {\n      return (\n\t\t\t\t<Animated.View\n\t\t\t\t\t{...this._panResponder.panHandlers}\n\t\t\t\t\tstyle={{\n  transform: [{ translateX: this._translateX }],\n  zIndex: 2,\n}}\n\t\t\t\t>\n\t\t\t\t\t{!this.props.list\n\t\t\t\t\t\t? <ListItem list style={this.props.style}>\n\t\t\t\t\t\t\t\t{this.props.body}\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t: <View style={[{ backgroundColor: '#FFF' },this.props.style]}>\n\t\t\t\t\t\t\t\t{this.props.body}\n\t\t\t\t\t\t\t</View>}\n\t\t\t\t</Animated.View>\n      );\n    } else {\n      return (\n\t\t\t\t<Animated.View\n\t\t\t\t\t{...this._panResponder.panHandlers}\n\t\t\t\t\tonLayout={e => this.onContentLayout(e)}\n\t\t\t\t\tstyle={{\n  transform: [{ translateX: this._translateX }],\n  zIndex: 2,\n}}\n\t\t\t\t>\n\t\t\t\t\t{!this.props.list\n\t\t\t\t\t\t? <ListItem list style={this.props.style}>\n\t\t\t\t\t\t\t\t{this.props.body}\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t: <View style={[{ backgroundColor: '#FFF' },this.props.style]}>\n\t\t\t\t\t\t\t\t{this.props.body}\n\t\t\t\t\t\t\t</View>}\n\t\t\t\t</Animated.View>\n      );\n    }\n  }\n\n  render() {\n    return (\n\t\t\t<View style={this.props.style ? this.props.style : undefined}>\n\t\t\t\t<View\n\t\t\t\t\tstyle={[\n  styles.hidden,\n  {\n    height: this.state.hiddenHeight,\n    flex:1,\n    flexDirection: \"row\",\n    justifyContent: \"space-between\",\n  },\n]}\n\t\t\t\t>\n\t\t\t\t\t<Left style={{ width: this.props.leftOpenValue, zIndex: 1 }}>\n\t\t\t\t\t\t{this.props.left}\n\t\t\t\t\t</Left>\n\t\t\t\t\t<Body style={{ flex: 0 }} />\n\t\t\t\t\t<Right style={{ width: -this.props.rightOpenValue, zIndex: 1 }}>\n\t\t\t\t\t\t{this.props.right}\n\t\t\t\t\t</Right>\n\t\t\t\t</View>\n\t\t\t\t{this.renderMainContent()}\n\t\t\t</View>\n    );\n  }\n}\n\nconst styles = {\n  container: {\n\t\t// As of RN 0.29 flex: 1 is causing all rows to be the same height\n\t\t// flex: 1\n  },\n  hidden: {\n    bottom: 0,\n    left: 0,\n    overflow: \"hidden\",\n    position: \"absolute\",\n    right: 0,\n    top: 0,\n  },\n};\n\nconst StyledSwipeRow = connectStyle(\"NativeBase.SwipeRow\", {}, mapPropsToStyleNames)(SwipeRow);\nexport { StyledSwipeRow as SwipeRow };\n"]},"metadata":{},"sourceType":"script"}