{"ast":null,"code":"Object.defineProperty(exports,\"__esModule\",{value:true});exports.ToastContainer=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _jsxFileName=\"src/basic/ToastContainer.js\";var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _react=require(\"react\");var _react2=_interopRequireDefault(_react);var _propTypes=require(\"prop-types\");var _propTypes2=_interopRequireDefault(_propTypes);var _reactNative=require(\"react-native\");var _nativeBaseShoutemTheme=require(\"native-base-shoutem-theme\");var _Text=require(\"./Text\");var _Button=require(\"./Button\");var _View=require(\"./View\");var _Toast=require(\"./Toast\");var _mapPropsToStyleNames=require(\"../utils/mapPropsToStyleNames\");var _mapPropsToStyleNames2=_interopRequireDefault(_mapPropsToStyleNames);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj};}function _objectWithoutProperties(obj,keys){var target={};for(var i in obj){if(keys.indexOf(i)>=0)continue;if(!Object.prototype.hasOwnProperty.call(obj,i))continue;target[i]=obj[i];}return target;}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ToastContainer=function(_Component){_inherits(ToastContainer,_Component);function ToastContainer(props){_classCallCheck(this,ToastContainer);var _this=_possibleConstructorReturn(this,(ToastContainer.__proto__||Object.getPrototypeOf(ToastContainer)).call(this,props));_this.state={modalVisible:false,fadeAnim:new _reactNative.Animated.Value(0)};return _this;}_createClass(ToastContainer,[{key:\"getToastStyle\",value:function getToastStyle(){return{position:\"absolute\",opacity:this.state.fadeAnim,width:\"100%\",elevation:9,paddingHorizontal:_reactNative.Platform.OS===\"ios\"?20:0,top:this.state.position===\"top\"?this.getTop():undefined,bottom:this.state.position===\"bottom\"?this.getTop():undefined};}},{key:\"getTop\",value:function getTop(){if(_reactNative.Platform.OS===\"ios\"){return 30;}else{return 0;}}},{key:\"getButtonText\",value:function getButtonText(buttonText){if(buttonText){if(buttonText.trim().length===0){return undefined;}else return buttonText;}return undefined;}},{key:\"getModalState\",value:function getModalState(){return this.state.modalVisible;}},{key:\"showToast\",value:function showToast(_ref){var config=_ref.config;this.setState({modalVisible:true,text:config.text,buttonText:this.getButtonText(config.buttonText),type:config.type,position:config.position?config.position:\"bottom\",supportedOrientations:config.supportedOrientations,style:config.style,buttonTextStyle:config.buttonTextStyle,buttonStyle:config.buttonStyle,textStyle:config.textStyle,onClose:config.onClose});if(this.closeTimeout){clearTimeout(this.closeTimeout);}if(config.duration!==0){var duration=config.duration>0?config.duration:1500;this.closeTimeout=setTimeout(this.closeToast.bind(this,'timeout'),duration);}_reactNative.Animated.timing(this.state.fadeAnim,{toValue:1,duration:200}).start();}},{key:\"closeModal\",value:function closeModal(reason){this.setState({modalVisible:false});var onClose=this.state.onClose;if(onClose&&typeof onClose===\"function\"){onClose(reason);}}},{key:\"closeToast\",value:function closeToast(reason){clearTimeout(this.closeTimeout);_reactNative.Animated.timing(this.state.fadeAnim,{toValue:0,duration:200}).start(this.closeModal.bind(this,reason));}},{key:\"render\",value:function render(){var _this2=this;if(this.state.modalVisible){return _react2.default.createElement(_reactNative.Animated.View,{style:this.getToastStyle(),__source:{fileName:_jsxFileName,lineNumber:105}},_react2.default.createElement(_Toast.Toast,{style:this.state.style,danger:this.state.type==\"danger\"?true:false,success:this.state.type==\"success\"?true:false,warning:this.state.type==\"warning\"?true:false,__source:{fileName:_jsxFileName,lineNumber:106}},_react2.default.createElement(_Text.Text,{style:this.state.textStyle,__source:{fileName:_jsxFileName,lineNumber:112}},this.state.text),this.state.buttonText&&_react2.default.createElement(_Button.Button,{style:this.state.buttonStyle,onPress:function onPress(){return _this2.closeToast('user');},__source:{fileName:_jsxFileName,lineNumber:114}},_react2.default.createElement(_Text.Text,{style:this.state.buttonTextStyle,__source:{fileName:_jsxFileName,lineNumber:118}},this.state.buttonText))));}else return null;}}],[{key:\"show\",value:function show(_ref2){var config=_objectWithoutProperties(_ref2,[]);this.toastInstance._root.showToast({config:config});}},{key:\"hide\",value:function hide(){if(this.toastInstance._root.getModalState()){this.toastInstance._root.closeToast(\"functionCall\");}}}]);return ToastContainer;}(_react.Component);ToastContainer.propTypes=_extends({},_reactNative.ViewPropTypes,{style:_propTypes2.default.oneOfType([_propTypes2.default.object,_propTypes2.default.number,_propTypes2.default.array])});var StyledToastContainer=(0,_nativeBaseShoutemTheme.connectStyle)(\"NativeBase.ToastContainer\",{},_mapPropsToStyleNames2.default)(ToastContainer);exports.ToastContainer=StyledToastContainer;","map":{"version":3,"sources":["../../../src/basic/ToastContainer.js"],"names":["ToastContainer","Component","modalVisible","fadeAnim","Animated","config","position","opacity","width","elevation","paddingHorizontal","Platform","top","bottom","buttonText","text","type","supportedOrientations","style","buttonTextStyle","buttonStyle","textStyle","onClose","clearTimeout","duration","setTimeout","toValue","reason","ViewPropTypes","PropTypes","StyledToastContainer","mapPropsToStyleNames"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { View, Modal, Platform, Animated, ViewPropTypes } from \"react-native\";\nimport { connectStyle } from \"native-base-shoutem-theme\";\nimport { Text } from \"./Text\";\nimport { Button } from \"./Button\";\nimport { ViewNB } from \"./View\";\nimport { Toast } from \"./Toast\";\nimport mapPropsToStyleNames from \"../utils/mapPropsToStyleNames\";\n\nclass ToastContainer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      modalVisible: false,\n      fadeAnim: new Animated.Value(0)\n    };\n  }\n  static toastInstance;\n  static show({ ...config }) {\n    this.toastInstance._root.showToast({ config });\n  }\n  static hide() {\n    if (this.toastInstance._root.getModalState()) {\n      this.toastInstance._root.closeToast(\"functionCall\");\n    }\n  }\n  getToastStyle() {\n    return {\n      position: \"absolute\",\n      opacity: this.state.fadeAnim,\n      width: \"100%\",\n      elevation: 9,\n      paddingHorizontal: Platform.OS === \"ios\" ? 20 : 0,\n      top: this.state.position === \"top\" ? this.getTop() : undefined,\n      bottom: this.state.position === \"bottom\" ? this.getTop() : undefined\n    };\n  }\n  getTop() {\n    if (Platform.OS === \"ios\") {\n      return 30;\n    } else {\n      return 0;\n    }\n  }\n  getButtonText(buttonText) {\n    if (buttonText) {\n      if (buttonText.trim().length === 0) {\n        return undefined;\n      } else return buttonText;\n    }\n    return undefined;\n  }\n  getModalState() {\n    return this.state.modalVisible;\n  }\n  showToast({ config }) {\n    this.setState({\n      modalVisible: true,\n      text: config.text,\n      buttonText: this.getButtonText(config.buttonText),\n      type: config.type,\n      position: config.position ? config.position : \"bottom\",\n      supportedOrientations: config.supportedOrientations,\n      style: config.style,\n      buttonTextStyle: config.buttonTextStyle,\n      buttonStyle: config.buttonStyle,\n      textStyle: config.textStyle,\n      onClose: config.onClose\n    });\n    // If we have a toast already open, cut off its close timeout so that it won't affect *this* toast.\n    if (this.closeTimeout) {\n      clearTimeout(this.closeTimeout)\n    }\n    // Set the toast to close after the duration.\n    if (config.duration !== 0) {\n      const duration = (config.duration > 0) ? config.duration : 1500;\n      this.closeTimeout = setTimeout(this.closeToast.bind(this, 'timeout'), duration);\n    }\n    // Fade the toast in now.\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 1,\n      duration: 200\n    }).start();\n  }\n  closeModal(reason) {\n    this.setState({\n      modalVisible: false\n    });\n    const { onClose } = this.state;\n    if (onClose && typeof onClose === \"function\") {\n      onClose(reason);\n    }\n  }\n  closeToast(reason) {\n    clearTimeout(this.closeTimeout);\n    Animated.timing(this.state.fadeAnim, {\n      toValue: 0,\n      duration: 200\n    }).start(this.closeModal.bind(this, reason));\n  }\n  render() {\n    if (this.state.modalVisible) {\n      return (\n        <Animated.View style={this.getToastStyle()}>\n          <Toast\n            style={this.state.style}\n            danger={this.state.type == \"danger\" ? true : false}\n            success={this.state.type == \"success\" ? true : false}\n            warning={this.state.type == \"warning\" ? true : false}\n          >\n            <Text style={this.state.textStyle}>{this.state.text}</Text>\n            {this.state.buttonText && (\n              <Button\n                style={this.state.buttonStyle}\n                onPress={() => this.closeToast('user')}\n              >\n                <Text style={this.state.buttonTextStyle}>\n                  {this.state.buttonText}\n                </Text>\n              </Button>\n            )}\n          </Toast>\n        </Animated.View>\n      );\n    } else return null;\n  }\n}\n\nToastContainer.propTypes = {\n  ...ViewPropTypes,\n  style: PropTypes.oneOfType([\n    PropTypes.object,\n    PropTypes.number,\n    PropTypes.array\n  ])\n};\n\nconst StyledToastContainer = connectStyle(\n  \"NativeBase.ToastContainer\",\n  {},\n  mapPropsToStyleNames\n)(ToastContainer);\n\nexport { StyledToastContainer as ToastContainer };\n"]},"metadata":{},"sourceType":"script"}