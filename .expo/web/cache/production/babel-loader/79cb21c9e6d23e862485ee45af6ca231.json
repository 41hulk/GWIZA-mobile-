{"ast":null,"code":"var _interopRequireDefault=require(\"@babel/runtime/helpers/interopRequireDefault\");Object.defineProperty(exports,\"__esModule\",{value:true});exports.default=void 0;var _objectWithoutProperties2=_interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));var _extends2=_interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));var _classCallCheck2=_interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));var _createClass2=_interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));var _possibleConstructorReturn2=_interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));var _getPrototypeOf2=_interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));var _inherits2=_interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));var _nullthrows=_interopRequireDefault(require(\"nullthrows\"));var _react=_interopRequireDefault(require(\"react\"));var _reactNative=require(\"react-native\");var _withNativeAd=require(\"./withNativeAd\");var AdTriggerView=function(_React$Component){(0,_inherits2.default)(AdTriggerView,_React$Component);function AdTriggerView(){var _this;(0,_classCallCheck2.default)(this,AdTriggerView);_this=(0,_possibleConstructorReturn2.default)(this,(0,_getPrototypeOf2.default)(AdTriggerView).apply(this,arguments));_this._trigger=null;return _this;}(0,_createClass2.default)(AdTriggerView,[{key:\"render\",value:function render(){var _this2=this;return _react.default.createElement(_withNativeAd.AdTriggerViewContext.Consumer,null,function(contextValue){var context=(0,_nullthrows.default)(contextValue);var forwardedProps=_this2._getForwardedProps();var props=(0,_extends2.default)({},forwardedProps,{ref:function ref(component){if(component){_this2._trigger=component;context.registerComponent(component);}else{context.unregisterComponent((0,_nullthrows.default)(_this2._trigger));_this2._trigger=null;}},onPress:function onPress(){context.onTriggerAd();if(forwardedProps.onPress){return forwardedProps.onPress.apply(forwardedProps,arguments);}}});return _this2.props.renderInteractiveComponent?_this2.props.renderInteractiveComponent(props):_this2._renderDefaultInteractiveComponent(props);});}},{key:\"_getForwardedProps\",value:function _getForwardedProps(){var _this$props=this.props,renderInteractiveComponent=_this$props.renderInteractiveComponent,props=(0,_objectWithoutProperties2.default)(_this$props,[\"renderInteractiveComponent\"]);return props;}},{key:\"_renderDefaultInteractiveComponent\",value:function _renderDefaultInteractiveComponent(props){return _react.default.createElement(_reactNative.TouchableOpacity,(0,_extends2.default)({},props,{collapsable:false}));}}]);return AdTriggerView;}(_react.default.Component);exports.default=AdTriggerView;","map":{"version":3,"sources":["../../src/facebook-ads/AdTriggerView.tsx"],"names":[],"mappings":"6zBAAA,8DACA,oDACA,yCAEA,4C,GAUqB,CAAA,a,mFAArB,wBAAA,4D,sHAGE,MAAA,QAAA,CAAsC,IAAtC,CAHF,aAwDC,C,8EAnDO,iBACJ,MACE,8BAAC,kCAAD,CAAsB,QAAtB,MACG,SAAC,YAAD,CAAmD,CAClD,GAAI,CAAA,OAAO,CAAG,wBAAW,YAAX,CAAd,CAGA,GAAI,CAAA,cAAc,CAAG,MAAI,CAAC,kBAAL,EAArB,CACA,GAAI,CAAA,KAAK,CAAG,sBAAc,EAAd,CAAkB,cAAlB,CAAkC,CAE5C,GAAG,CAAE,aAAC,SAAD,CAA+C,CAClD,GAAI,SAAJ,CAAe,CACb,MAAI,CAAC,QAAL,CAAgB,SAAhB,CACA,OAAO,CAAC,iBAAR,CAA0B,SAA1B,EACD,CAHD,IAGO,CACL,OAAO,CAAC,mBAAR,CAA4B,wBAAW,MAAI,CAAC,QAAhB,CAA5B,EACA,MAAI,CAAC,QAAL,CAAgB,IAAhB,CACD,CACF,CAV2C,CAa5C,OAb4C,mBAatB,CACpB,OAAO,CAAC,WAAR,GAEA,GAAI,cAAc,CAAC,OAAnB,CAA4B,CAC1B,MAAO,CAAA,cAAc,CAAC,OAAf,OAAA,cAAc,WAArB,CACD,CACF,CAnB2C,CAAlC,CAAZ,CAsBA,MAAO,CAAA,MAAI,CAAC,KAAL,CAAW,0BAAX,CACH,MAAI,CAAC,KAAL,CAAW,0BAAX,CAAsC,KAAtC,CADG,CAEH,MAAI,CAAC,kCAAL,CAAwC,KAAxC,CAFJ,CAGD,CA/BH,CADF,CAmCD,C,+DAKiB,iBAC+B,KAAK,KADpC,CACV,0BADU,aACV,0BADU,CACqB,KADrB,mFAEhB,MAAO,CAAA,KAAP,CACD,C,8FAGkC,K,CAAQ,CAEzC,MAAO,8BAAC,6BAAD,0BAAsB,KAAtB,EAA6B,WAAW,CAAE,KAA1C,GAAP,CACD,C,2BArDO,eAAM,S","sourcesContent":["import nullthrows from 'nullthrows';\nimport React from 'react';\nimport { TouchableOpacity } from 'react-native';\n\nimport { AdTriggerViewContext, AdTriggerViewContextValue } from './withNativeAd';\n\ntype TouchableProps = {\n  onPress?: (...args: any[]) => any;\n};\n\ntype AdTriggerViewProps<P> = {\n  renderInteractiveComponent?: (props: P) => React.ReactElement<P>;\n} & P;\n\nexport default class AdTriggerView<\n  P extends TouchableProps = React.ElementProps<TouchableOpacity>\n> extends React.Component<AdTriggerViewProps<P>> {\n  _trigger: React.Component<P> | null = null;\n\n  render() {\n    return (\n      <AdTriggerViewContext.Consumer>\n        {(contextValue: AdTriggerViewContextValue | null) => {\n          let context = nullthrows(contextValue);\n\n          // Compute the context-dependent props to pass to the interactive component\n          let forwardedProps = this._getForwardedProps();\n          let props = Object.assign({}, forwardedProps, {\n            // Register the trigger component with the ad manager when it is mounted and unmounted\n            ref: (component: React.Component<P> | null): void => {\n              if (component) {\n                this._trigger = component;\n                context.registerComponent(component);\n              } else {\n                context.unregisterComponent(nullthrows(this._trigger));\n                this._trigger = null;\n              }\n            },\n\n            // Notify the ad manager to trigger the ad\n            onPress(...args: any[]): any {\n              context.onTriggerAd();\n\n              if (forwardedProps.onPress) {\n                return forwardedProps.onPress(...args);\n              }\n            },\n          });\n\n          return this.props.renderInteractiveComponent\n            ? this.props.renderInteractiveComponent(props)\n            : this._renderDefaultInteractiveComponent(props);\n        }}\n      </AdTriggerViewContext.Consumer>\n    );\n  }\n\n  // NOTE: This is a helper method to extract the props to forward to the interactive component\n  // because TypeScript does not currently support rest objects with generic types in some cases,\n  // hence the type assertions\n  _getForwardedProps(): P {\n    let { renderInteractiveComponent, ...props } = this.props as any;\n    return props as P;\n  }\n\n  // TODO: change from TouchableOpacity to a Gesture Handler BorderlessButton\n  _renderDefaultInteractiveComponent(props: P): React.ReactElement<P> {\n    // @ts-ignore: the RN TypeScript declarations are missing the \"collapsable\" prop\n    return <TouchableOpacity {...props} collapsable={false} />;\n  }\n}\n"],"sourceRoot":""},"metadata":{},"sourceType":"script"}